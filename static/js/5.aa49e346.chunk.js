(this["webpackJsonpreact-neumorphism-music"]=this["webpackJsonpreact-neumorphism-music"]||[]).push([[5],{101:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var c=n(36),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\u6682\u672a\u5f00\u53d1";return{type:c.a,payload:t,show:e}}},109:function(e,t,n){e.exports={header:"Header_header__1eJ9g",title:"Header_title__1xM3O",menu:"Header_menu__1T83F",search:"Header_search__2Cfbn"}},112:function(e,t,n){e.exports={"nav-tabs":"NavTabs_nav-tabs__2ZI7e",actived:"NavTabs_actived__ktnLY"}},113:function(e,t,n){e.exports={"fullscreen-player":"FullscreenPlayer_fullscreen-player__2tqtV",top:"FullscreenPlayer_top__1Jgzg",back:"FullscreenPlayer_back__3J066","song-info":"FullscreenPlayer_song-info__1IM76","song-name":"FullscreenPlayer_song-name__5RGjA","singer-name":"FullscreenPlayer_singer-name__2yK4x"}},114:function(e,t,n){e.exports={cd:"CD_cd__3wazE",spin:"CD_spin__wfcO7","img-card":"CD_img-card__2qxvh",pause:"CD_pause__2Ebi7"}},119:function(e,t,n){e.exports={controller:"Controller_controller__2JFWq","button-group":"Controller_button-group__4FMxt","control-button":"Controller_control-button__jJSIj"}},120:function(e,t,n){e.exports={"mini-player":"MiniPlayer_mini-player__2f86i","img-wrap":"MiniPlayer_img-wrap__2OcFG",spin:"MiniPlayer_spin__2D8x_",pause:"MiniPlayer_pause___OBpb",text:"MiniPlayer_text__kHFgD",name:"MiniPlayer_name__1Sl9p",singer:"MiniPlayer_singer__3mrts",control:"MiniPlayer_control__V4LDz","control-button":"MiniPlayer_control-button__1D6Aw","control-list":"MiniPlayer_control-list__3en4k"}},121:function(e,t,n){e.exports={"song-list":"SongList_song-list__2yZQX",mask:"SongList_mask__NmgQg","list-wrap":"SongList_list-wrap__2x6uJ","list-header":"SongList_list-header__3yKI2","list-scroll-wrap":"SongList_list-scroll-wrap__37tlS","song-item":"SongList_song-item__pP44a",delete:"SongList_delete__16VSv",active:"SongList_active__3UgwG"}},122:function(e,t,n){e.exports={toast:"Toast_toast__U5vZg"}},136:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(34),s=n(109),o=n.n(s),r=n(89),i=n(101),l=n(32),u=n(14),j=function(){var e=Object(l.b)(),t=function(){e(Object(i.a)(!0,"\u529f\u80fd\u6682\u672a\u5f00\u53d1\u54df"))};return Object(u.jsxs)("header",{className:o.a.header,children:[Object(u.jsx)(r.b,{className:o.a.menu,onClick:t,children:Object(u.jsx)(r.e,{icon:"list"})}),Object(u.jsx)(r.b,{className:o.a.search,onClick:t,children:Object(u.jsx)(r.e,{icon:"search"})})]})},b=Object(c.memo)(j),d=n(27),O=n(112),m=n.n(O),f=function(e){return Object(u.jsxs)("div",{className:m.a["nav-tabs"],children:[Object(u.jsx)(d.c,{to:"/recommend",activeClassName:m.a.actived,children:Object(u.jsx)("span",{children:"\u63a8\u8350"})}),Object(u.jsx)(d.c,{to:"/singers",activeClassName:m.a.actived,children:Object(u.jsx)("span",{children:"\u6b4c\u624b"})}),Object(u.jsx)(d.c,{to:"/rank",activeClassName:m.a.actived,children:Object(u.jsx)("span",{children:"\u6392\u884c\u699c"})})]})},p=Object(c.memo)(f),x=n(92),h=n(95),g=n(137),_=n(33),v=n(113),y=n.n(v),N=n(88),S=n.n(N),C=n(114),k=n.n(C),w=n(93),P=n.n(w),L=function(e){var t=e.curSong,c=e.status;return Object(u.jsx)("div",{className:S()(k.a.cd,!c&&k.a.pause),children:Object(u.jsx)(r.c,{className:k.a["img-card"],children:Object(u.jsx)(r.d,{children:Object(u.jsx)(P.a,{debounce:500,placeholder:Object(u.jsx)("img",{src:n(90).default,alt:"music",width:"50",height:"100%",className:k.a.img}),children:Object(u.jsx)("img",{src:t.album.picUrl,alt:""})})})})})},T=Object(c.memo)(L),E=n(119),A=n.n(E),I=function(e){var t=e.percent,n=e.curIdx,a=e.status,s=e.onProgressChange,o=Object(l.b)(),j=Object(c.useState)(0),b=Object(x.a)(j,2),d=b[0],O=b[1],m=Object(c.useRef)(null),f=Object(c.useState)({x:0,moved:!1}),p=Object(x.a)(f,2),h=p[0],g=p[1];Object(c.useEffect)((function(){O(m.current.clientWidth)}),[]);return Object(u.jsxs)("div",{className:A.a.controller,children:[Object(u.jsx)(r.f,{percent:t,ref:m,onClick:function(e){e.stopPropagation();var t=m.current.offsetLeft,n=(e.pageX-t)/d;s(n)},onTouchMove:function(e){g({x:e.touches[0].pageX,moved:!0})},onTouchEnd:function(){if(h.moved){var e=m.current.offsetLeft,t=(h.x-e)/d;s(t),g({x:0,moved:!1})}}}),Object(u.jsxs)("div",{className:A.a["button-group"],children:[Object(u.jsx)(r.b,{className:A.a["control-button"],onClick:function(){o(Object(i.a)(!0,"\u529f\u80fd\u6682\u672a\u5f00\u53d1~"))},children:Object(u.jsx)(r.e,{icon:"sync"})}),Object(u.jsx)(r.b,{className:A.a["control-button"],onClick:function(){o(Object(_.changeCurrentIndexAction)(n-1))},children:Object(u.jsx)(r.e,{icon:"backward"})}),Object(u.jsx)(r.b,{size:"lg",className:A.a["control-button"],onClick:function(){o(Object(_.changePlayStatusAction)(!a))},children:Object(u.jsx)(r.e,{icon:a?"pause":"play"})}),Object(u.jsx)(r.b,{className:A.a["control-button"],onClick:function(){o(Object(_.changeCurrentIndexAction)(n+1))},children:Object(u.jsx)(r.e,{icon:"forward"})}),Object(u.jsx)(r.b,{className:A.a["control-button"],children:Object(u.jsx)(r.e,{icon:"list-ul",onClick:function(){o(Object(_.changeShowSongListAction)(!0))}})})]})]})},M=Object(c.memo)(I),F=function(e){var t=e.fullscreen,n=e.curSong,c=e.curIdx,a=e.status,s=e.percent,o=e.onProgressChange,i=Object(l.b)();return Object(u.jsx)(g.a,{classNames:"full",timeout:500,in:t,unmountOnExit:!0,children:Object(u.jsxs)("div",{className:y.a["fullscreen-player"],children:[Object(u.jsxs)("div",{className:y.a.top,children:[Object(u.jsx)("div",{className:y.a.back,onClick:function(){i(Object(_.changeFullscreenAction)(!1))},children:Object(u.jsx)(r.e,{icon:"chevron-down"})}),Object(u.jsxs)("div",{className:y.a["song-info"],children:[Object(u.jsx)("p",{className:y.a["song-name"],children:n.name}),Object(u.jsx)("p",{className:y.a["singer-name"],children:Object(h.a)(n.singers)})]})]}),Object(u.jsx)(T,{curSong:n,status:a}),Object(u.jsx)(M,{percent:s,status:a,curIdx:c,onProgressChange:o})]})})},D=Object(c.memo)(F),R=n(120),U=n.n(R),J=function(e){var t=e.song,n=e.playStatus,c=Object(l.b)();return Object(u.jsx)(g.a,{in:void 0!==t,timeout:400,classNames:"mini",unmountOnExit:!0,children:Object(u.jsxs)("div",{className:U.a["mini-player"],onClick:function(e){e.stopPropagation(),c(Object(_.changeFullscreenAction)(!0))},children:[Object(u.jsx)("div",{className:S()(U.a["img-wrap"],!n&&U.a.pause),children:Object(u.jsx)("img",{src:(null===t||void 0===t?void 0:t.album.picUrl)+"?param=100y100",width:"40",height:"40",alt:""})}),Object(u.jsxs)("div",{className:U.a.text,children:[Object(u.jsx)("p",{className:U.a.name,children:null===t||void 0===t?void 0:t.name}),Object(u.jsx)("p",{className:U.a.singer,children:null===t||void 0===t?void 0:t.singers.map((function(e){return e.name})).join(" / ")})]}),Object(u.jsxs)("div",{className:U.a.control,children:[Object(u.jsx)(r.b,{className:U.a["control-button"],onClick:function(e){e.stopPropagation(),console.log("play",!n),c(Object(_.changePlayStatusAction)(!n))},children:Object(u.jsx)(r.e,{icon:n?"pause":"play"})}),Object(u.jsx)(r.b,{className:U.a["control-list"],onClick:function(e){e.stopPropagation(),c(Object(_.changeShowSongListAction)(!0))},children:Object(u.jsx)(r.e,{icon:"list-ul"})})]})]})})},Y=Object(c.memo)(J),H=n(16),z=n(121),B=n.n(z),G=n(91),X=function(e){var t=e.songList,n=e.index,a=Object(c.useState)(!0),s=Object(x.a)(a,2),o=s[0],i=s[1],j=Object(c.useCallback)((function(e){i(0===e.y)}),[]),b=Object(c.useState)({startY:0,distance:0,initialed:!1}),d=Object(x.a)(b,2),O=d[0],m=d[1],f=Object(c.useRef)(null),p=Object(c.useState)(!0),v=Object(x.a)(p,2),y=v[0],N=v[1],C=Object(l.b)(),k=Object(c.useCallback)((function(){f.current.style.transform="translate3d(0, 100%, 0)"}),[]),w=Object(c.useCallback)((function(){f.current.style.transition="all 0.3s",f.current.style.transform="translate3d(0, 0, 0)"}),[]),P=Object(c.useCallback)((function(){f.current.style.transform="translate3d(0, ".concat(O.distance,"px, 0)")}),[O.distance]),L=Object(c.useCallback)((function(){f.current.style.transition="all 0.3s",f.current.style.transform="translate3d(0px, 100%, 0px)"}),[]),T=Object(c.useCallback)((function(){f.current.style.transform="translate3d(0px, 100%, 0px)",C(Object(_.changeShowSongListAction)(!1))}),[]);return Object(u.jsx)(g.a,{timeout:500,in:y,appear:!0,classNames:"move",onEnter:k,onEntering:w,onExit:P,onExiting:L,onExited:T,children:Object(u.jsxs)("div",{className:B.a["song-list"],onClick:function(e){e.stopPropagation()},children:[Object(u.jsx)("div",{className:B.a.mask,onClick:function(){N(!1)}}),Object(u.jsxs)("div",{className:B.a["list-wrap"],ref:f,onTouchStart:function(e){o&&!O.initialed&&(f.current.style.transition="",m({startY:e.nativeEvent.touches[0].pageY,distance:0,initialed:!0}))},onTouchMove:function(e){if(o&&O.initialed){var t=e.nativeEvent.touches[0].pageY-O.startY;t<0||(m(Object(H.a)(Object(H.a)({},O),{},{distance:t})),f.current.style.transform="translate3d(0, ".concat(t,"px, 0)"))}},onTouchEnd:function(e){console.log(o),o&&O.initialed&&(O.distance>150?(f.current.style.transition="all .3s",N(!1)):(m({startY:0,distance:0,initialed:!1}),f.current.style.transition="all .3s",f.current.style.transform="translate3d(0, 0, 0)"))},children:[Object(u.jsx)("div",{className:B.a["list-header"],children:Object(u.jsx)("div",{className:B.a["play-mode"],children:Object(u.jsx)("span",{children:"\u64ad\u653e\u5217\u8868"})})}),Object(u.jsx)("div",{className:B.a["list-scroll-wrap"],children:Object(u.jsx)(G.a,{onScroll:j,children:Object(u.jsx)("ul",{children:t.map((function(e,t){return Object(u.jsxs)("li",{className:S()(B.a["song-item"],n===t&&B.a.active),children:[Object(u.jsxs)("p",{children:[Object(u.jsx)("span",{children:t===n&&Object(u.jsx)(r.e,{icon:"play-circle"})}),"".concat(e.name," - ").concat(Object(h.a)(e.singers)," ")]}),Object(u.jsx)(r.b,{className:B.a.delete,btnType:"primary",onClick:function(e){!function(e,t){i(!1),e.stopPropagation(),C(Object(_.deleteSongAction)(t))}(e,t)},children:Object(u.jsx)(r.e,{icon:"trash"})})]},e.id)}))})})})]})]})})},q=Object(c.memo)(X),V=function(){var e=Object(l.c)((function(e){return{curIdx:e.player.currentIndex,songList:e.player.songList,status:e.player.playStatus,showSongList:e.player.showSongList,fullscreen:e.player.fullScreen}})),t=e.curIdx,n=e.songList,a=e.status,s=e.showSongList,o=e.fullscreen,r=Object(l.b)(),i=Object(c.useState)(null),j=Object(x.a)(i,2),b=j[0],d=j[1],O=Object(c.useState)(0),m=Object(x.a)(O,2),f=m[0],p=m[1],g=Object(c.useState)(0),v=Object(x.a)(g,2),y=v[0],N=v[1],S=Object(c.useState)(0),C=Object(x.a)(S,2),k=C[0],w=C[1],P=Object(c.useCallback)((function(e){console.log(e);var t=e*y;p(t),L.current.currentTime=t,!a&&Object(_.changePlayStatusAction)(!0)}),[y]);Object(c.useEffect)((function(){if(!(t<0||n.length<1)){var e=n[t];d((function(t){return(null===t||void 0===t?void 0:t.id)===e.id?t:e})),p(0),N(e.dt/1e3||0)}}),[n,t]),Object(c.useEffect)((function(){var e=L.current;b&&e&&(e.src=Object(h.b)(b.id),r(Object(_.changePlayStatusAction)(!0)))}),[b]),Object(c.useEffect)((function(){var e=L.current;e&&(a?e.play():e.pause())}),[a]);var L=Object(c.useRef)(null);return Object(u.jsxs)("div",{className:"player",children:[Object(u.jsx)(Y,{song:n[t],playStatus:a}),Object(u.jsx)("audio",{autoPlay:!0,ref:L,onTimeUpdate:function(e){p(e.target.currentTime);var t=isNaN(e.target.currentTime/y)?0:f/y*100;w(t)},onEnded:function(){console.log("end"),r(Object(_.changeCurrentIndexAction)(t+1))}}),s&&Object(u.jsx)(q,{index:t,songList:n}),b&&Object(u.jsx)(D,{onProgressChange:P,status:a,curIdx:t,fullscreen:o,curSong:b,percent:k})]})},Z=Object(c.memo)(V),K=n(122),Q=n.n(K),W=function(){var e=Object(l.c)((function(e){return{showToast:e.toast.showToast,toastText:e.toast.toastText}})),t=e.showToast,n=e.toastText,a=void 0===n?"":n,s=Object(l.b)(),o=Object(c.useCallback)((function(){s(Object(i.a)(!1))}),[]),j=Object(c.useRef)(null);return Object(c.useEffect)((function(){if(t)return j.current=setTimeout((function(){o()}),2e3),function(){clearTimeout(Number(j.current)),j.current=null}}),[t,o]),Object(u.jsx)(g.a,{timeout:200,unmountOnExit:!0,classNames:"drop",in:t,children:Object(u.jsx)(r.a,{title:a,className:Q.a.toast,onClose:o})})},$=Object(c.memo)(W);t.default=function(e){var t=e.route;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(b,{}),Object(u.jsx)(p,{}),Object(a.a)(null===t||void 0===t?void 0:t.routes),Object(u.jsx)($,{}),Object(u.jsx)(Z,{})]})}},90:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/music.6275a6ce.png"},91:function(e,t,n){"use strict";var c=n(16),a=n(92),s=n(99),o=n(98),r=n(0),i=n(94),l=n.n(i),u=n(14),j=Object(r.forwardRef)((function(e,t){var n=e.direction,i=void 0===n?"vertical":n,j=e.click,b=void 0===j||j,d=e.children,O=e.bounceTop,m=void 0===O||O,f=e.bounceBottom,p=void 0===f||f,x=e.bounceLeft,h=void 0===x||x,g=e.bounceRight,_=void 0===g||g,v=(e.pullDownLoading,e.pullUpLoading,e.onScroll),y=(e.onPullDown,e.onPullUp,Object(s.a)(e,["direction","click","children","bounceTop","bounceBottom","bounceLeft","bounceRight","pullDownLoading","pullUpLoading","onScroll","onPullDown","onPullUp"])),N=Object(r.useState)(null),S=Object(a.a)(N,2),C=S[0],k=S[1],w=Object(r.useRef)(null);return Object(r.useEffect)((function(){var e=new o.a(w.current,Object(c.a)({click:b,probeType:3,scrollX:"horizontal"===i,scrollY:"vertical"===i,tap:"tap",bounce:{top:m,bottom:p,left:h,right:_}},y));return k(e),function(){k(null)}}),[]),Object(r.useImperativeHandle)(t,(function(){return{refresh:function(){C&&(C.refresh(),C.scrollTo(0,0))},getBScroll:function(){if(C)return C}}})),Object(r.useEffect)((function(){if(v&&C)return C.on("scroll",v),function(){C.off("scroll")}}),[C,v]),Object(r.useEffect)((function(){C&&C.refresh()})),Object(u.jsx)("div",{className:l.a["scroll-wrapper"],ref:w,children:d})}));t.a=Object(r.memo)(j)},94:function(e,t,n){e.exports={"scroll-wrapper":"Scroll_scroll-wrapper__3fgDG"}},95:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return a}));var c=function(e){return e.map((function(e){return e.name})).join(" / ")},a=function(e){return"https://music.163.com/song/media/outer/url?id=".concat(e,".mp3")}}}]);
//# sourceMappingURL=5.aa49e346.chunk.js.map
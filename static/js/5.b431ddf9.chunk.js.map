{"version":3,"sources":["store/actions.ts","components/Header/index.module.scss","components/NavTabs/index.module.scss","components/Player/FullscreenPlayer/index.module.scss","components/Player/FullscreenPlayer/CD/index.module.scss","components/Player/FullscreenPlayer/Controller/index.module.scss","components/Player/MiniPlayer/index.module.scss","components/Player/SongList/index.module.scss","components/Toast/index.module.scss","components/Header/index.tsx","components/NavTabs/index.tsx","components/Player/FullscreenPlayer/CD/index.tsx","components/Player/FullscreenPlayer/Controller/index.tsx","components/Player/FullscreenPlayer/index.tsx","components/Player/MiniPlayer/index.tsx","components/Player/SongList/index.tsx","components/Player/index.tsx","components/Toast/index.tsx","layouts/HomeLayout/index.tsx","assets/images/music.png","components/Scroll/index.tsx","components/Scroll/index.module.scss","utils/format.ts"],"names":["toggleToastAction","show","payload","type","TOGGLE_TOAST","module","exports","Header","dispatch","useDispatch","handleClick","className","styles","rounded","icon","onClick","memo","NavTabs","props","to","activeClassName","CD","curSong","status","classNames","debounce","placeholder","src","require","default","alt","width","height","album","picUrl","Controller","percent","curIdx","onProgressChange","useState","barWidth","setBarWidth","barRef","useRef","x","moved","touchInfo","setTouchInfo","useEffect","current","clientWidth","ref","e","stopPropagation","offsetLeft","curPercent","pageX","onTouchMove","touches","onTouchEnd","changeCurrentIndexAction","size","changePlayStatusAction","changeShowSongListAction","FullscreenPlayer","fullscreen","CSSTransition","timeout","in","unmountOnExit","changeFullscreenAction","name","formatSingerName","singers","MiniPlayer","song","playStatus","undefined","map","item","join","console","log","SongList","songList","index","canTouch","setCanTouch","handleScroll","useCallback","pos","y","startY","distance","initialed","listRef","setShow","onEnterCB","style","onEnteringCB","onExitCB","onExitingCB","onExitedCB","appear","onEnter","onEntering","onExit","onExiting","onExited","onTouchStart","nativeEvent","pageY","dis","transform","transition","Scroll","onScroll","idx","btnType","deleteSongAction","handleDeleteClick","id","Player","useSelector","state","player","currentIndex","showSongList","fullScreen","setCurSong","currentTime","setCurrentTime","duration","setDuration","setPercent","handleProgressChange","newTime","audioRef","length","newSong","preSong","dt","audioDom","formatSongUrl","play","pause","autoPlay","onTimeUpdate","target","per","isNaN","onEnded","Toast","showToast","toast","toastText","hideToast","timer","setTimeout","clearTimeout","Number","title","onClose","HomeLayout","route","renderRoutes","routes","forwardRef","direction","click","children","bounceTop","bounceBottom","bounceLeft","bounceRight","pullDownLoading","pullUpLoading","restProps","onPullDown","onPullUp","bScroll","setBScroll","scrollRef","scroll","BScroll","probeType","scrollX","scrollY","tap","bounce","top","bottom","left","right","useImperativeHandle","refresh","scrollTo","getBScroll","on","off","singerList"],"mappings":"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","file":"static/js/5.b431ddf9.chunk.js","sourcesContent":["import { TOGGLE_TOAST } from \"./actionTypes\";\n\nexport const toggleToastAction = (\n  show: boolean,\n  payload: string = \"暂未开发\"\n) => {\n  return {\n    type: TOGGLE_TOAST,\n    payload: payload,\n    show: show,\n  };\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__MbTxY\",\"title\":\"Header_title__1F92a\",\"menu\":\"Header_menu__11t9R\",\"search\":\"Header_search__1IyxK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav-tabs\":\"NavTabs_nav-tabs__24HRn\",\"actived\":\"NavTabs_actived__16j6j\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fullscreen-player\":\"FullscreenPlayer_fullscreen-player__NrtTH\",\"top\":\"FullscreenPlayer_top__1uYDY\",\"back\":\"FullscreenPlayer_back__1AI0n\",\"song-info\":\"FullscreenPlayer_song-info__2x7J3\",\"song-name\":\"FullscreenPlayer_song-name__26NG7\",\"singer-name\":\"FullscreenPlayer_singer-name__1OkPx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cd\":\"CD_cd__1fo6n\",\"spin\":\"CD_spin__KobOG\",\"img-card\":\"CD_img-card__3f6kA\",\"pause\":\"CD_pause__1a7Eb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"controller\":\"Controller_controller__359PJ\",\"button-group\":\"Controller_button-group__nhAql\",\"control-button\":\"Controller_control-button__235yS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mini-player\":\"MiniPlayer_mini-player__CeHNs\",\"img-wrap\":\"MiniPlayer_img-wrap__1-a7b\",\"spin\":\"MiniPlayer_spin__3wxhx\",\"pause\":\"MiniPlayer_pause__2kQOf\",\"text\":\"MiniPlayer_text__mXQuV\",\"name\":\"MiniPlayer_name__3TpJU\",\"singer\":\"MiniPlayer_singer__ZlG0P\",\"control\":\"MiniPlayer_control__ID-sq\",\"control-button\":\"MiniPlayer_control-button__3sNG-\",\"control-list\":\"MiniPlayer_control-list__1FU1I\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"song-list\":\"SongList_song-list__2ntge\",\"mask\":\"SongList_mask__3q32e\",\"list-wrap\":\"SongList_list-wrap__L8_cA\",\"list-header\":\"SongList_list-header__3ubwt\",\"list-scroll-wrap\":\"SongList_list-scroll-wrap__3NjPG\",\"song-item\":\"SongList_song-item__1Iid_\",\"delete\":\"SongList_delete__wU8z-\",\"active\":\"SongList_active__2fGVx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toast\":\"Toast_toast__14S2T\"};","import React, { memo } from \"react\";\nimport styles from \"./index.module.scss\";\nimport { IconButton } from \"collin-ui\";\nimport { toggleToastAction } from \"../../store/actions\";\nimport { useDispatch } from \"react-redux\";\n\nconst Header = () => {\n  const dispatch = useDispatch();\n  const handleClick = () => {\n    dispatch(toggleToastAction(true, \"功能暂未开发哟\"));\n  };\n\n  return (\n    <header className={styles[\"header\"]}>\n      <IconButton\n        rounded\n        className={styles[\"menu\"]}\n        icon=\"list\"\n        onClick={handleClick}\n      ></IconButton>\n      <IconButton\n        onClick={handleClick}\n        rounded\n        className={styles[\"search\"]}\n        icon=\"search\"\n      ></IconButton>\n    </header>\n  );\n};\n\nexport default memo(Header);\n","import React, { FC, memo } from \"react\";\nimport { NavLink } from \"react-router-dom\";\n\nimport styles from \"./index.module.scss\";\n\nconst NavTabs: FC = (props) => {\n  return (\n    <div className={styles[\"nav-tabs\"]}>\n      <NavLink to=\"/recommend\" activeClassName={styles[\"actived\"]}>\n        <span>推荐</span>\n      </NavLink>\n      <NavLink to=\"/singers\" activeClassName={styles[\"actived\"]}>\n        <span>歌手</span>\n      </NavLink>\n      <NavLink to=\"/rank\" activeClassName={styles[\"actived\"]}>\n        <span>排行榜</span>\n      </NavLink>\n    </div>\n  );\n};\n\nexport default memo(NavTabs);\n","import React, { FC } from \"react\";\nimport classNames from \"classnames\";\nimport styles from \"./index.module.scss\";\nimport { Card, CardContent } from \"collin-ui\";\nimport LazyLoad from \"react-lazyload\";\nimport { Song } from \"../../../../typings\";\nimport { memo } from \"react\";\n\nexport interface CDProps {\n  curSong: Song;\n  status: boolean;\n}\n\nconst CD: FC<CDProps> = ({ curSong, status }) => {\n  return (\n    <div className={classNames(styles[\"cd\"], !status && styles[\"pause\"])}>\n      <Card className={styles[\"img-card\"]}>\n        <CardContent>\n          <LazyLoad\n            debounce={500}\n            placeholder={\n              <img\n                src={require(\"../../../../assets/images/music.png\").default}\n                alt=\"music\"\n                width=\"50\"\n                height=\"100%\"\n                className={styles[\"img\"]}\n              />\n            }\n          >\n            <img src={curSong.album.picUrl} alt=\"\" />\n          </LazyLoad>\n        </CardContent>\n      </Card>\n    </div>\n  );\n};\n\nexport default memo(CD);\n","import { Button, Icon, IconButton, ProgressBar } from \"collin-ui\";\nimport React, { FC, useEffect, useState, MouseEvent, TouchEvent } from \"react\";\nimport { useRef } from \"react\";\nimport { memo } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { handleProgressChange } from \"../..\";\nimport { toggleToastAction } from \"../../../../store/actions\";\nimport {\n  changeCurrentIndexAction,\n  changePlayStatusAction,\n  changeShowSongListAction,\n} from \"../../store/actions\";\nimport styles from \"./index.module.scss\";\n\nexport interface ControllerProps {\n  percent: number;\n  curIdx: number;\n  status: boolean;\n  onProgressChange: handleProgressChange;\n}\n\nconst Controller: FC<ControllerProps> = ({\n  percent,\n  curIdx,\n  status,\n  onProgressChange,\n}) => {\n  const dispatch = useDispatch();\n  const [barWidth, setBarWidth] = useState<number>(0);\n  const barRef = useRef<HTMLDivElement>(null);\n  const [touchInfo, setTouchInfo] = useState({\n    x: 0,\n    moved: false,\n  });\n\n  /**\n   * 获取进度条容器的物理宽度并保存\n   */\n  useEffect((): void => {\n    setBarWidth(barRef.current!.clientWidth);\n  }, []);\n  /**\n   * 显示列表\n   */\n  const handleListButtonClick = () => {\n    dispatch(changeShowSongListAction(true));\n  };\n  /**\n   * 播放键\n   */\n  const handlePlayButtonClick = () => {\n    dispatch(changePlayStatusAction(!status));\n  };\n  /**\n   * 切换循环\n   */\n  const handleRecycleClick = () => {\n    dispatch(toggleToastAction(true, \"功能暂未开发~\"));\n  };\n  /**\n   * 点击下一首\n   */\n  const handleNextClick = () => {\n    dispatch(changeCurrentIndexAction(curIdx + 1));\n  };\n  /**\n   * 点击前一首\n   */\n  const handlePreClick = () => {\n    dispatch(changeCurrentIndexAction(curIdx - 1));\n  };\n  /**\n   * 进度条点击\n   */\n  const handleBarClick = (e: MouseEvent) => {\n    e.stopPropagation();\n    const offsetLeft: number = barRef.current!.offsetLeft,\n      curPercent: number = (e.pageX - offsetLeft) / barWidth;\n    onProgressChange(curPercent);\n  };\n  /**\n   * 进度条拖动\n   */\n  const handleTouchMove = (e: TouchEvent) => {\n    setTouchInfo({ x: e.touches[0].pageX, moved: true });\n  };\n  /**\n   * 进度条拖动结束\n   */\n\n  const handleTouchEnd = () => {\n    if (!touchInfo.moved) return;\n    const offsetLeft: number = barRef.current!.offsetLeft,\n      curPercent: number = (touchInfo.x - offsetLeft) / barWidth;\n    onProgressChange(curPercent);\n    setTouchInfo({ x: 0, moved: false });\n  };\n\n  return (\n    <div className={styles[\"controller\"]}>\n      <ProgressBar\n        percent={percent}\n        ref={barRef}\n        onClick={handleBarClick}\n        onTouchMove={handleTouchMove}\n        onTouchEnd={handleTouchEnd}\n      ></ProgressBar>\n      <div className={styles[\"button-group\"]}>\n        <IconButton\n          rounded\n          className={styles[\"control-button\"]}\n          onClick={handleRecycleClick}\n          icon=\"sync\"\n        ></IconButton>\n\n        <IconButton\n          rounded\n          icon=\"backward\"\n          className={styles[\"control-button\"]}\n          onClick={handlePreClick}\n        ></IconButton>\n\n        <IconButton\n          rounded\n          icon={status ? \"pause\" : \"play\"}\n          size=\"lg\"\n          className={styles[\"control-button\"]}\n          onClick={handlePlayButtonClick}\n        ></IconButton>\n\n        <IconButton\n          rounded\n          icon=\"forward\"\n          className={styles[\"control-button\"]}\n          onClick={handleNextClick}\n        ></IconButton>\n\n        <IconButton\n          rounded\n          icon=\"list-ul\"\n          className={styles[\"control-button\"]}\n          onClick={handleListButtonClick}\n        ></IconButton>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(Controller);\n","import { Icon } from \"collin-ui\";\nimport { FC, memo, useCallback } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { CSSTransition } from \"react-transition-group\";\nimport { Song } from \"../../../typings\";\nimport { formatSingerName } from \"../../../utils/format\";\nimport { changeFullscreenAction } from \"../store/actions\";\nimport styles from \"./index.module.scss\";\nimport CD from \"./CD\";\nimport Controller from \"./Controller\";\nimport { handleProgressChange } from \"..\";\n\nexport interface FullscreenPlayerProps {\n  fullscreen: boolean;\n  curSong: Song;\n  status: boolean;\n  curIdx: number;\n  percent: number;\n  onProgressChange: handleProgressChange;\n}\n\nconst FullscreenPlayer: FC<FullscreenPlayerProps> = ({\n  fullscreen,\n  curSong,\n  curIdx,\n  status,\n  percent,\n  onProgressChange,\n}) => {\n  const dispatch = useDispatch();\n  const handleToggleFullscreen = () => {\n    dispatch(changeFullscreenAction(false));\n  };\n\n  return (\n    <CSSTransition\n      classNames=\"full\"\n      timeout={500}\n      in={fullscreen}\n      unmountOnExit\n    >\n      <div className={styles[\"fullscreen-player\"]}>\n        <div className={styles[\"top\"]}>\n          <div className={styles[\"back\"]} onClick={handleToggleFullscreen}>\n            <Icon icon=\"chevron-down\"></Icon>\n          </div>\n          <div className={styles[\"song-info\"]}>\n            <p className={styles[\"song-name\"]}>{curSong.name}</p>\n            <p className={styles[\"singer-name\"]}>\n              {formatSingerName(curSong.singers)}\n            </p>\n          </div>\n        </div>\n        <CD curSong={curSong} status={status}></CD>\n        <Controller\n          percent={percent}\n          status={status}\n          curIdx={curIdx}\n          onProgressChange={onProgressChange}\n        ></Controller>\n      </div>\n    </CSSTransition>\n  );\n};\n\nexport default memo(FullscreenPlayer);\n","import { Button, Icon, IconButton } from \"collin-ui\";\nimport React, {\n  FC,\n  memo,\n  MouseEvent,\n  MouseEventHandler,\n  useEffect,\n  useState,\n} from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { CSSTransition } from \"react-transition-group\";\nimport { StoreState } from \"../../../store\";\nimport { Song } from \"../../../typings\";\nimport {\n  changePlayStatusAction,\n  changeShowSongListAction,\n  changeFullscreenAction,\n} from \"../store/actions\";\nimport styles from \"./index.module.scss\";\nimport classNames from \"classnames\";\n\nexport interface MiniPlayerProps {\n  playStatus: boolean;\n  song?: Song;\n}\n\nconst MiniPlayer: FC<MiniPlayerProps> = (props) => {\n  const { song, playStatus } = props;\n  const dispatch = useDispatch();\n  const handlePlayButtonClick = (e: MouseEvent<HTMLButtonElement>) => {\n    e.stopPropagation();\n    console.log(\"play\", !playStatus);\n    dispatch(changePlayStatusAction(!playStatus));\n  };\n\n  const handleListButtonClick = (e: MouseEvent<HTMLButtonElement>) => {\n    e.stopPropagation();\n    dispatch(changeShowSongListAction(true));\n  };\n\n  const handlePlayerClick = (e: MouseEvent<HTMLDivElement>) => {\n    e.stopPropagation();\n    dispatch(changeFullscreenAction(true));\n  };\n\n  return (\n    <CSSTransition\n      in={song !== undefined}\n      timeout={400}\n      classNames=\"mini\"\n      unmountOnExit\n    >\n      <div className={styles[\"mini-player\"]} onClick={handlePlayerClick}>\n        <div\n          className={classNames(\n            styles[\"img-wrap\"],\n            !playStatus && styles[\"pause\"]\n          )}\n        >\n          <img\n            src={song?.album.picUrl + \"?param=100y100\"}\n            width=\"40\"\n            height=\"40\"\n            alt=\"\"\n          />\n        </div>\n        <div className={styles[\"text\"]}>\n          <p className={styles[\"name\"]}>{song?.name}</p>\n          <p className={styles[\"singer\"]}>\n            {song?.singers.map((item) => item.name).join(\" / \")}\n          </p>\n        </div>\n        <div className={styles[\"control\"]}>\n          <IconButton\n            rounded\n            icon={playStatus ? \"pause\" : \"play\"}\n            className={styles[\"control-button\"]}\n            onClick={handlePlayButtonClick}\n          ></IconButton>\n\n          <IconButton\n            rounded\n            icon=\"list-ul\"\n            className={styles[\"control-list\"]}\n            onClick={handleListButtonClick}\n          ></IconButton>\n        </div>\n      </div>\n    </CSSTransition>\n  );\n};\n\nexport default memo(MiniPlayer);\n","import React, {\n  FC,\n  memo,\n  useCallback,\n  useState,\n  TouchEvent,\n  MouseEvent,\n  useRef,\n} from \"react\";\nimport { CSSTransition } from \"react-transition-group\";\nimport { Song } from \"../../../typings\";\nimport styles from \"./index.module.scss\";\nimport Scroll, { Position } from \"../../Scroll\";\nimport { useDispatch } from \"react-redux\";\nimport { changeShowSongListAction, deleteSongAction } from \"../store/actions\";\nimport { Button, Icon, IconButton } from \"collin-ui\";\nimport { formatSingerName } from \"../../../utils/format\";\nimport classNames from \"classnames\";\n\nexport interface SongListProps {\n  songList: Song[];\n  index: number;\n}\n\nconst SongList: FC<SongListProps> = (props) => {\n  const { songList, index } = props;\n  const [canTouch, setCanTouch] = useState(true);\n  const handleScroll = useCallback((pos: Position) => {\n    setCanTouch(pos.y === 0);\n  }, []);\n  const [touchInfo, setTouchInfo] = useState({\n    startY: 0,\n    distance: 0,\n    // initial 用于区分是点击还是touch时间\n    initialed: false,\n  });\n  const listRef = useRef<HTMLDivElement>(null);\n  const handleTouchStart = (e: TouchEvent) => {\n    if (!canTouch || touchInfo.initialed) {\n      return;\n    }\n    listRef.current!.style[\"transition\"] = \"\";\n\n    setTouchInfo({\n      startY: e.nativeEvent.touches[0].pageY,\n      distance: 0,\n      initialed: true,\n    });\n  };\n  const handleTouchMove = (e: TouchEvent) => {\n    if (!canTouch || !touchInfo.initialed) {\n      return;\n    }\n    const dis = e.nativeEvent.touches[0].pageY - touchInfo.startY;\n    if (dis < 0) {\n      return;\n    }\n    setTouchInfo({ ...touchInfo, distance: dis });\n    listRef.current!.style.transform = `translate3d(0, ${dis}px, 0)`;\n  };\n  const [show, setShow] = useState(true);\n  const dispatch = useDispatch();\n\n  const handleTouchEnd = (e: TouchEvent) => {\n    console.log(canTouch);\n    if (!canTouch || !touchInfo.initialed) {\n      return;\n    }\n    if (touchInfo.distance > 150) {\n      listRef.current!.style.transition = `all .3s`;\n      setShow(false);\n    } else {\n      setTouchInfo({ startY: 0, distance: 0, initialed: false });\n      listRef.current!.style.transition = `all .3s`;\n      listRef.current!.style.transform = `translate3d(0, 0, 0)`;\n    }\n  };\n\n  const handleDeleteClick = (e: MouseEvent, idx: number) => {\n    setCanTouch(false);\n    e.stopPropagation();\n    dispatch(deleteSongAction(idx));\n  };\n\n  const onEnterCB = useCallback(() => {\n    listRef.current!.style[\"transform\"] = `translate3d(0, 100%, 0)`;\n  }, []);\n\n  const onEnteringCB = useCallback(() => {\n    listRef.current!.style[\"transition\"] = \"all 0.3s\";\n    listRef.current!.style[\"transform\"] = `translate3d(0, 0, 0)`;\n  }, []);\n\n  const onExitCB = useCallback(() => {\n    listRef.current!.style[\n      \"transform\"\n    ] = `translate3d(0, ${touchInfo.distance}px, 0)`;\n  }, [touchInfo.distance]);\n\n  const onExitingCB = useCallback(() => {\n    listRef.current!.style[\"transition\"] = \"all 0.3s\";\n    listRef.current!.style[\"transform\"] = `translate3d(0px, 100%, 0px)`;\n  }, []);\n\n  const onExitedCB = useCallback(() => {\n    listRef.current!.style[\"transform\"] = `translate3d(0px, 100%, 0px)`;\n    dispatch(changeShowSongListAction(false));\n  }, []);\n\n  return (\n    <CSSTransition\n      timeout={500}\n      in={show}\n      appear\n      classNames=\"move\"\n      onEnter={onEnterCB}\n      onEntering={onEnteringCB}\n      onExit={onExitCB}\n      onExiting={onExitingCB}\n      onExited={onExitedCB}\n    >\n      <div\n        className={styles[\"song-list\"]}\n        onClick={(e) => {\n          e.stopPropagation();\n        }}\n      >\n        <div\n          className={styles[\"mask\"]}\n          onClick={() => {\n            setShow(false);\n          }}\n        ></div>\n        <div\n          className={styles[\"list-wrap\"]}\n          ref={listRef}\n          onTouchStart={handleTouchStart}\n          onTouchMove={handleTouchMove}\n          onTouchEnd={handleTouchEnd}\n        >\n          <div className={styles[\"list-header\"]}>\n            <div className={styles[\"play-mode\"]}>\n              <span>播放列表</span>\n            </div>\n          </div>\n          <div className={styles[\"list-scroll-wrap\"]}>\n            <Scroll onScroll={handleScroll}>\n              <ul>\n                {songList.map((item, idx) => {\n                  return (\n                    <li\n                      key={item.id}\n                      className={classNames(\n                        styles[\"song-item\"],\n                        index === idx && styles[\"active\"]\n                      )}\n                    >\n                      <p>\n                        <span>\n                          {idx === index && <Icon icon=\"play-circle\"></Icon>}\n                        </span>\n\n                        {`${item.name} - ${formatSingerName(item.singers)} `}\n                      </p>\n                      <IconButton\n                        rounded\n                        icon=\"trash\"\n                        className={styles[\"delete\"]}\n                        btnType=\"primary\"\n                        onClick={(e) => {\n                          handleDeleteClick(e, idx);\n                        }}\n                      ></IconButton>\n                    </li>\n                  );\n                })}\n              </ul>\n            </Scroll>\n          </div>\n        </div>\n      </div>\n    </CSSTransition>\n  );\n};\n\nexport default memo(SongList);\n","import { Button, Icon } from \"collin-ui\";\nimport React, {\n  BaseSyntheticEvent,\n  FC,\n  memo,\n  ReactEventHandler,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { CSSTransition } from \"react-transition-group\";\nimport { StoreState } from \"../../store\";\nimport { Song } from \"../../typings\";\nimport { formatSongUrl } from \"../../utils/format\";\nimport FullscreenPlayer from \"./FullscreenPlayer\";\nimport styles from \"./index.module.scss\";\nimport MiniPlayer from \"./MiniPlayer\";\nimport SongList from \"./SongList\";\nimport {\n  changeCurrentIndexAction,\n  changePlayStatusAction,\n} from \"./store/actions\";\n\nexport type handleProgressChange = (percent: number) => void;\n\nconst Player: FC = () => {\n  const { curIdx, songList, status, showSongList, fullscreen } = useSelector(\n    (state: StoreState) => ({\n      curIdx: state.player.currentIndex,\n      songList: state.player.songList,\n      status: state.player.playStatus,\n      showSongList: state.player.showSongList,\n      fullscreen: state.player.fullScreen,\n    })\n  );\n  const dispatch = useDispatch();\n\n  const [curSong, setCurSong] = useState<Song | null>(null);\n  const [currentTime, setCurrentTime] = useState<number>(0),\n    [duration, setDuration] = useState<number>(0),\n    [percent, setPercent] = useState<number>(0);\n\n  /**\n   * 更新当前时间\n   * @param {Event} e\n   */\n  const handleUpdateTime: ReactEventHandler<HTMLAudioElement> = (\n    e: BaseSyntheticEvent\n  ): void => {\n    setCurrentTime(e.target.currentTime);\n    const per: number = isNaN(e.target.currentTime / duration)\n      ? 0\n      : (currentTime / duration) * 100;\n    setPercent(per);\n  };\n\n  /**\n   * 控制进度条\n   * @param {Number} 进度条百分比\n   */\n  const handleProgressChange: handleProgressChange = useCallback(\n    (percent: number): void => {\n      console.log(percent);\n      const newTime: number = percent * duration;\n      setCurrentTime(newTime);\n      audioRef.current!.currentTime = newTime;\n      !status && changePlayStatusAction(true);\n    },\n    [duration]\n  );\n  useEffect(() => {\n    if (curIdx < 0 || songList.length < 1) {\n      return;\n    }\n    const newSong = songList[curIdx];\n    setCurSong((preSong) => {\n      return preSong?.id === newSong.id ? preSong : newSong;\n    });\n    setCurrentTime(0);\n    setDuration(newSong.dt / 1000 || 0);\n  }, [songList, curIdx]);\n\n  /**\n   * 监听歌曲变化\n   */\n  useEffect(() => {\n    const audioDom = audioRef.current;\n    if (curSong && audioDom) {\n      audioDom.src = formatSongUrl(curSong.id);\n      dispatch(changePlayStatusAction(true));\n    }\n  }, [curSong]);\n\n  /**\n   * 监听歌曲状态\n   */\n  useEffect(() => {\n    const audioDom = audioRef.current;\n    if (audioDom) {\n      if (status) {\n        audioDom.play();\n      } else {\n        audioDom.pause();\n      }\n    }\n  }, [status]);\n\n  const handleEnded = () => {\n    console.log(\"end\");\n    dispatch(changeCurrentIndexAction(curIdx + 1));\n  };\n\n  const audioRef = useRef<HTMLAudioElement>(null);\n  return (\n    <div className=\"player\">\n      <MiniPlayer song={songList[curIdx]} playStatus={status} />\n      <audio\n        autoPlay\n        ref={audioRef}\n        onTimeUpdate={handleUpdateTime}\n        onEnded={handleEnded}\n      ></audio>\n      {showSongList && <SongList index={curIdx} songList={songList}></SongList>}\n      {curSong && (\n        <FullscreenPlayer\n          onProgressChange={handleProgressChange}\n          status={status}\n          curIdx={curIdx}\n          fullscreen={fullscreen}\n          curSong={curSong}\n          percent={percent}\n        ></FullscreenPlayer>\n      )}\n    </div>\n  );\n};\n\nexport default memo(Player);\n","import React, { FC, memo, useCallback, useEffect, useRef } from \"react\";\nimport styles from \"./index.module.scss\";\nimport { CSSTransition } from \"react-transition-group\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { StoreState } from \"../../store\";\nimport { Alert } from \"collin-ui\";\nimport { toggleToastAction } from \"../../store/actions\";\nconst Toast: FC = () => {\n  const { showToast, toastText = \"\" } = useSelector((state: StoreState) => ({\n    showToast: state.toast.showToast,\n    toastText: state.toast.toastText,\n  }));\n  const dispatch = useDispatch();\n  const hideToast = useCallback(() => {\n    dispatch(toggleToastAction(false));\n  }, []);\n  const timer = useRef<NodeJS.Timeout | null>(null);\n  useEffect(() => {\n    if (showToast) {\n      timer.current = setTimeout(() => {\n        hideToast();\n      }, 2000);\n      return () => {\n        clearTimeout(Number(timer.current));\n        timer.current = null;\n      };\n    }\n  }, [showToast, hideToast]);\n  return (\n    <CSSTransition timeout={200} unmountOnExit classNames=\"drop\" in={showToast}>\n      <Alert\n        title={toastText}\n        className={styles[\"toast\"]}\n        onClose={hideToast}\n      ></Alert>\n    </CSSTransition>\n  );\n};\n\nexport default memo(Toast);\n","import React, { FC } from \"react\";\nimport { renderRoutes, RouteConfigComponentProps } from \"react-router-config\";\nimport Header from \"../../components/Header\";\nimport NavTabs from \"../../components/NavTabs\";\nimport Player from \"../../components/Player\";\nimport Toast from \"../../components/Toast\";\n\nconst HomeLayout: FC<RouteConfigComponentProps> = ({ route }) => {\n  return (\n    <>\n      <Header />\n      <NavTabs />\n      {renderRoutes(route?.routes)}\n      <Toast />\n      <Player />\n    </>\n  );\n};\n\nexport default HomeLayout;\n","export default __webpack_public_path__ + \"static/media/music.6275a6ce.png\";","import BScroll, { BScrollInstance, Options } from \"better-scroll\";\nimport React, {\n  FC,\n  forwardRef,\n  memo,\n  ReactNode,\n  useEffect,\n  useImperativeHandle,\n  useRef,\n  useState,\n} from \"react\";\nimport styles from \"./index.module.scss\";\n\nexport interface Position {\n  x: number;\n  y: number;\n}\n\nexport interface ScrollProps extends Options {\n  ref?: any;\n  direction?: \"horizontal\" | \"vertical\";\n  click?: boolean;\n  bounceTop?: boolean;\n  bounceBottom?: boolean;\n  bounceLeft?: boolean;\n  bounceRight?: boolean;\n  pullDownLoading?: boolean;\n  pullUpLoading?: boolean;\n  onScroll?: (pos: Position) => void;\n  onPullDown?: () => void;\n  onPullUp?: () => void;\n  children?: ReactNode;\n}\n\nexport interface ScrollInstance {\n  refresh: () => void;\n  getBScroll: () => BScrollInstance | undefined;\n}\n\nconst Scroll: FC<ScrollProps> = forwardRef(\n  (\n    {\n      direction = \"vertical\",\n      click = true,\n      children,\n      bounceTop = true,\n      bounceBottom = true,\n      bounceLeft = true,\n      bounceRight = true,\n      pullDownLoading = false,\n      pullUpLoading = false,\n      onScroll,\n      onPullDown = () => {},\n      onPullUp = () => {},\n      ...restProps\n    },\n    ref\n  ) => {\n    const [bScroll, setBScroll] = useState<BScrollInstance | null>(null);\n    const scrollRef = useRef<HTMLDivElement>(null);\n    /**\n     * 初始化scroll\n     */\n    useEffect(() => {\n      let scroll = new BScroll(scrollRef.current!, {\n        click: click,\n        probeType: 3,\n        scrollX: direction === \"horizontal\",\n        scrollY: direction === \"vertical\",\n        tap: \"tap\",\n        bounce: {\n          top: bounceTop,\n          bottom: bounceBottom,\n          left: bounceLeft,\n          right: bounceRight,\n        },\n        ...restProps,\n      });\n\n      setBScroll(scroll);\n      return () => {\n        setBScroll(null);\n      };\n    }, []);\n\n    /**\n     * 通过 ref 暴露组件方法\n     */\n    useImperativeHandle(ref, (): ScrollInstance => {\n      return {\n        refresh() {\n          if (bScroll) {\n            bScroll.refresh();\n            bScroll.scrollTo(0, 0);\n          }\n        },\n        getBScroll() {\n          if (bScroll) {\n            return bScroll;\n          }\n        },\n      };\n    });\n\n    /**\n     * 监听onScroll\n     */\n    useEffect(() => {\n      if (onScroll && bScroll) {\n        bScroll.on(\"scroll\", onScroll);\n        return () => {\n          bScroll.off(\"scroll\");\n        };\n      }\n    }, [bScroll, onScroll]);\n\n    /**\n     * 刷新scroll\n     */\n    useEffect(() => {\n      bScroll && bScroll.refresh();\n    });\n    return (\n      <div className={styles[\"scroll-wrapper\"]} ref={scrollRef}>\n        {children}\n      </div>\n    );\n  }\n);\n\nexport default memo(Scroll);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"scroll-wrapper\":\"Scroll_scroll-wrapper__3QrgQ\"};","import { Singer } from \"../typings\";\n\n/**\n * 格式化数量\n * @param count\n */\nexport const formatCount = (count: number): number | string | undefined => {\n  if (count < 0) return;\n  if (count >= 100000000) {\n    return (count / 100000000).toFixed(1) + \"亿\";\n  }\n  if (count >= 10000) {\n    return (count / 10000).toFixed(1) + \"万\";\n  }\n  return count;\n};\n\n/**\n * 给小于10的数字补上0\n * @param num\n */\nexport const formatNumber = (num: number): string | number => {\n  const numStr = num.toString();\n  return numStr[1] ? num : \"0\" + num;\n};\n\n/**\n * 格式化歌手名字\n * @param singerList\n */\nexport const formatSingerName = (singerList: Singer[]): string => {\n  return singerList.map((item: Singer): string => item.name).join(\" / \");\n};\n\n/**\n * 组装歌曲的url\n * @param id\n */\nexport const formatSongUrl = (id: number): string => {\n  return `https://music.163.com/song/media/outer/url?id=${id}.mp3`;\n};\n\n/**\n * 转换歌曲播放时间\n * @param interval\n */\nexport const formatPlayTime = (interval: number): string => {\n  interval = interval | 0; // 向下取整\n  const minute = (interval / 60) | 0;\n  const second = (interval % 60).toString().padStart(2, \"0\");\n  return `${minute}:${second}`;\n};\n"],"sourceRoot":""}
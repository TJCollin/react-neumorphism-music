{"version":3,"sources":["pages/Rank/index.module.scss","pages/Rank/List/index.module.scss","pages/Rank/List/index.tsx","pages/Rank/index.tsx","assets/images/music.png","components/Scroll/index.tsx","components/Scroll/index.module.scss","components/Loading/index.tsx","components/Loading/index.module.scss"],"names":["module","exports","RankList","listData","Scroll","className","styles","map","rankItem","debounce","placeholder","src","require","default","alt","width","height","coverImgUrl","tracks","cur","index","to","id","first","second","memo","Rank","route","useSelector","state","curInx","player","currentIndex","globalList","rank","officialList","loading","dispatch","useDispatch","useEffect","length","getRankListAction","wrapperStyle","flex","overflow","marginBottom","style","renderRoutes","routes","Loading","forwardRef","ref","direction","click","children","bounceTop","bounceBottom","bounceLeft","bounceRight","onScroll","pullDownLoading","pullUpLoading","restProps","onPullDown","onPullUp","useState","bScroll","setBScroll","scrollRef","useRef","scroll","BScroll","current","probeType","scrollX","scrollY","tap","bounce","top","bottom","left","right","useImperativeHandle","refresh","scrollTo","getBScroll","on","off","icon"],"mappings":"6HACAA,EAAOC,QAAU,CAAC,YAAY,0B,oBCA9BD,EAAOC,QAAU,CAAC,gBAAgB,4BAA4B,KAAO,mBAAmB,QAAU,sBAAsB,IAAM,kBAAkB,YAAY,wBAAwB,YAAY,0B,gJCU1LC,EAA8B,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SACrC,OACE,cAACC,EAAA,EAAD,UACE,qBAAKC,UAAWC,IAAO,iBAAvB,SACGH,EAASI,KAAI,SAACC,GACb,OACE,cAAC,IAAD,CAAMH,UAAWC,IAAM,KAAvB,SACE,eAAC,IAAD,CAAaD,UAAWC,IAAM,QAA9B,UACE,qBAAKD,UAAWC,IAAM,IAAtB,SACE,cAAC,IAAD,CACEG,SAAU,IACVC,YACE,qBACEC,IACEC,EAAQ,IAAoCC,QAE9CC,IAAI,QACJC,MAAM,KACNC,OAAO,OACPX,UAAWC,IAAM,MAVvB,SAcE,qBACEK,IAAKH,EAASS,YACdH,IAAI,GACJT,UAAWC,IAAM,IACjBS,MAAM,OACNC,OAAO,aAIb,oBAAIX,UAAWC,IAAO,aAAtB,SACGE,EAASU,QACRV,EAASU,OAAOX,KAAI,SAACY,EAAgBC,GAAjB,OAClB,cAAC,IAAD,CAAMC,GAAE,gBAAWb,EAASc,IAA5B,SACE,qBAAIjB,UAAWC,IAAO,aAAtB,UACE,iCAAOc,EAAQ,EAAf,OACA,+BAAOD,EAAII,QACX,uCACA,+BAAOJ,EAAIK,WAJ4BJ,cA9BfZ,EAASc,YAgD5CG,iBAAKvB,G,wBC7BLwB,UA5B6B,SAAC,GAAe,IAAbC,EAAY,EAAZA,MAAY,EACHC,aACpD,SAACC,GAAD,MAAwB,CACtBC,OAAQD,EAAME,OAAOC,aACrBC,WAAYJ,EAAMK,KAAKD,WACvBE,aAAcN,EAAMK,KAAKC,aACzBC,QAASP,EAAMK,KAAKE,YALhBH,EADiD,EACjDA,WAAYH,EADqC,EACrCA,OAAQK,EAD6B,EAC7BA,aAAcC,EADe,EACfA,QAQpCC,EAAWC,cACjBC,qBAAU,WACHN,EAAWO,QAAWL,EAAaK,QACtCH,EAASI,iBAEV,IACH,IAAMC,EAAe,CACnBC,KAAM,EACNC,SAAU,SACVC,aAAcf,GAAU,EAAI,OAAS,GAEvC,OACE,sBAAKzB,UAAWC,IAAO,aAAcwC,MAAOJ,EAA5C,UACE,cAAC,EAAD,CAAUvC,SAAUgC,IACnBY,YAAY,OAACpB,QAAD,IAACA,OAAD,EAACA,EAAOqB,QACpBZ,GAAW,cAACa,EAAA,EAAD,S,gCChClB,OAAe,cAA0B,mC,oGCuCnC7C,EAA0B8C,sBAC9B,WAgBEC,GACI,IAAD,IAfDC,iBAeC,MAfW,WAeX,MAdDC,aAcC,SAbDC,EAaC,EAbDA,SAaC,IAZDC,iBAYC,aAXDC,oBAWC,aAVDC,kBAUC,aATDC,mBASC,SANDC,GAMC,EARDC,gBAQC,EAPDC,cAOC,EANDF,UAGGG,GAGF,EALDC,WAKC,EAJDC,SAIC,8KAC2BC,mBAAiC,MAD5D,mBACIC,EADJ,KACaC,EADb,KAEGC,EAAYC,iBAAuB,MA+DzC,OA3DA9B,qBAAU,WACR,IAAI+B,EAAS,IAAIC,IAAQH,EAAUI,QAAtB,aACXnB,MAAOA,EACPoB,UAAW,EACXC,QAAuB,eAAdtB,EACTuB,QAAuB,aAAdvB,EACTwB,IAAK,MACLC,OAAQ,CACNC,IAAKvB,EACLwB,OAAQvB,EACRwB,KAAMvB,EACNwB,MAAOvB,IAENI,IAIL,OADAK,EAAWG,GACJ,WACLH,EAAW,SAEZ,IAKHe,8BAAoB/B,GAAK,WACvB,MAAO,CACLgC,QADK,WAECjB,IACFA,EAAQiB,UACRjB,EAAQkB,SAAS,EAAG,KAGxBC,WAPK,WAQH,GAAInB,EACF,OAAOA,OASf3B,qBAAU,WACR,GAAIoB,GAAYO,EAEd,OADAA,EAAQoB,GAAG,SAAU3B,GACd,WACLO,EAAQqB,IAAI,aAGf,CAACrB,EAASP,IAKbpB,qBAAU,WACR2B,GAAWA,EAAQiB,aAGnB,qBAAK9E,UAAWC,IAAO,kBAAmB6C,IAAKiB,EAA/C,SACGd,OAMM7B,mBAAKrB,I,mBCjIpBJ,EAAOC,QAAU,CAAC,iBAAiB,iC,gCCDnC,4CAIMgD,EAAc,WAClB,OACE,qBAAK5C,UAAWC,IAAO,gBAAvB,SACE,cAAC,IAAD,CAAMkF,KAAK,UAAUnF,UAAWC,IAAM,aAK7BmB,mBAAKwB,I,mBCXpBjD,EAAOC,QAAU,CAAC,eAAe,8BAA8B,QAAU,yBAAyB,QAAU","file":"static/js/9.f2a5190f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"rank-wrap\":\"Rank_rank-wrap__1bXSg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"rankItem-list\":\"List_rankItem-list__1JJqt\",\"card\":\"List_card__2pF3o\",\"content\":\"List_content__yXFIF\",\"img\":\"List_img__2MbP8\",\"song-list\":\"List_song-list__3D8Lw\",\"song-item\":\"List_song-item__1qlYD\"};","import { Card, CardContent } from \"collin-ui\";\r\nimport React, { FC, memo } from \"react\";\r\nimport Scroll from \"../../../components/Scroll\";\r\nimport styles from \"./index.module.scss\";\r\nimport LazyLoad from \"react-lazyload\";\r\nimport { RankItem, RankTrack } from \"../typing\";\r\nimport { Link } from \"react-router-dom\";\r\nexport interface RankListProps {\r\n  listData: RankItem[];\r\n}\r\n\r\nconst RankList: FC<RankListProps> = ({ listData }) => {\r\n  return (\r\n    <Scroll>\r\n      <div className={styles[\"rankItem-list\"]}>\r\n        {listData.map((rankItem) => {\r\n          return (\r\n            <Card className={styles[\"card\"]} key={rankItem.id}>\r\n              <CardContent className={styles[\"content\"]}>\r\n                <div className={styles[\"img\"]}>\r\n                  <LazyLoad\r\n                    debounce={500}\r\n                    placeholder={\r\n                      <img\r\n                        src={\r\n                          require(\"../../../assets/images/music.png\").default\r\n                        }\r\n                        alt=\"music\"\r\n                        width=\"50\"\r\n                        height=\"100%\"\r\n                        className={styles[\"img\"]}\r\n                      />\r\n                    }\r\n                  >\r\n                    <img\r\n                      src={rankItem.coverImgUrl}\r\n                      alt=\"\"\r\n                      className={styles[\"img\"]}\r\n                      width=\"100%\"\r\n                      height=\"100%\"\r\n                    />\r\n                  </LazyLoad>\r\n                </div>\r\n                <ul className={styles[\"song-list\"]}>\r\n                  {rankItem.tracks &&\r\n                    rankItem.tracks.map((cur: RankTrack, index: number) => (\r\n                      <Link to={`/rank/${rankItem.id}`}>\r\n                        <li className={styles[\"song-item\"]} key={index}>\r\n                          <span>{index + 1}.</span>\r\n                          <span>{cur.first}</span>\r\n                          <span> - </span>\r\n                          <span>{cur.second}</span>\r\n                        </li>\r\n                      </Link>\r\n                    ))}\r\n                </ul>\r\n              </CardContent>\r\n            </Card>\r\n          );\r\n        })}\r\n      </div>\r\n    </Scroll>\r\n  );\r\n};\r\n\r\nexport default memo(RankList);\r\n","import React, { useEffect, FC } from \"react\";\r\nimport styles from \"./index.module.scss\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { StoreState } from \"../../store\";\r\nimport RankList from \"./List\";\r\nimport { getRankListAction } from \"./store/actions\";\r\nimport Loading from \"../../components/Loading\";\r\nimport { renderRoutes, RouteConfigComponentProps } from \"react-router-config\";\r\nconst Rank: FC<RouteConfigComponentProps> = ({ route }) => {\r\n  const { globalList, curInx, officialList, loading } = useSelector(\r\n    (state: StoreState) => ({\r\n      curInx: state.player.currentIndex,\r\n      globalList: state.rank.globalList,\r\n      officialList: state.rank.officialList,\r\n      loading: state.rank.loading,\r\n    })\r\n  );\r\n  const dispatch = useDispatch();\r\n  useEffect((): void => {\r\n    if (!globalList.length || !officialList.length) {\r\n      dispatch(getRankListAction());\r\n    }\r\n  }, []);\r\n  const wrapperStyle = {\r\n    flex: 1,\r\n    overflow: \"hidden\",\r\n    marginBottom: curInx > -1 ? \"60px\" : 0,\r\n  };\r\n  return (\r\n    <div className={styles[\"rank-wrap\"]} style={wrapperStyle}>\r\n      <RankList listData={officialList}></RankList>\r\n      {renderRoutes(route?.routes)}\r\n      {loading && <Loading></Loading>}\r\n    </div>\r\n  );\r\n};\r\nexport default Rank;\r\n","export default __webpack_public_path__ + \"static/media/music.6275a6ce.png\";","import BScroll, { BScrollInstance, Options } from \"better-scroll\";\r\nimport React, {\r\n  FC,\r\n  forwardRef,\r\n  memo,\r\n  ReactNode,\r\n  useEffect,\r\n  useImperativeHandle,\r\n  useRef,\r\n  useState,\r\n} from \"react\";\r\nimport styles from \"./index.module.scss\";\r\n\r\nexport interface Position {\r\n  x: number;\r\n  y: number;\r\n}\r\n\r\nexport interface ScrollProps extends Options {\r\n  ref?: any;\r\n  direction?: \"horizontal\" | \"vertical\";\r\n  click?: boolean;\r\n  bounceTop?: boolean;\r\n  bounceBottom?: boolean;\r\n  bounceLeft?: boolean;\r\n  bounceRight?: boolean;\r\n  pullDownLoading?: boolean;\r\n  pullUpLoading?: boolean;\r\n  onScroll?: (pos: Position) => void;\r\n  onPullDown?: () => void;\r\n  onPullUp?: () => void;\r\n  children?: ReactNode;\r\n}\r\n\r\nexport interface ScrollInstance {\r\n  refresh: () => void;\r\n  getBScroll: () => BScrollInstance | undefined;\r\n}\r\n\r\nconst Scroll: FC<ScrollProps> = forwardRef(\r\n  (\r\n    {\r\n      direction = \"vertical\",\r\n      click = true,\r\n      children,\r\n      bounceTop = true,\r\n      bounceBottom = true,\r\n      bounceLeft = true,\r\n      bounceRight = true,\r\n      pullDownLoading = false,\r\n      pullUpLoading = false,\r\n      onScroll,\r\n      onPullDown = () => {},\r\n      onPullUp = () => {},\r\n      ...restProps\r\n    },\r\n    ref\r\n  ) => {\r\n    const [bScroll, setBScroll] = useState<BScrollInstance | null>(null);\r\n    const scrollRef = useRef<HTMLDivElement>(null);\r\n    /**\r\n     * 初始化scroll\r\n     */\r\n    useEffect(() => {\r\n      let scroll = new BScroll(scrollRef.current!, {\r\n        click: click,\r\n        probeType: 3,\r\n        scrollX: direction === \"horizontal\",\r\n        scrollY: direction === \"vertical\",\r\n        tap: \"tap\",\r\n        bounce: {\r\n          top: bounceTop,\r\n          bottom: bounceBottom,\r\n          left: bounceLeft,\r\n          right: bounceRight,\r\n        },\r\n        ...restProps,\r\n      });\r\n\r\n      setBScroll(scroll);\r\n      return () => {\r\n        setBScroll(null);\r\n      };\r\n    }, []);\r\n\r\n    /**\r\n     * 通过 ref 暴露组件方法\r\n     */\r\n    useImperativeHandle(ref, (): ScrollInstance => {\r\n      return {\r\n        refresh() {\r\n          if (bScroll) {\r\n            bScroll.refresh();\r\n            bScroll.scrollTo(0, 0);\r\n          }\r\n        },\r\n        getBScroll() {\r\n          if (bScroll) {\r\n            return bScroll;\r\n          }\r\n        },\r\n      };\r\n    });\r\n\r\n    /**\r\n     * 监听onScroll\r\n     */\r\n    useEffect(() => {\r\n      if (onScroll && bScroll) {\r\n        bScroll.on(\"scroll\", onScroll);\r\n        return () => {\r\n          bScroll.off(\"scroll\");\r\n        };\r\n      }\r\n    }, [bScroll, onScroll]);\r\n\r\n    /**\r\n     * 刷新scroll\r\n     */\r\n    useEffect(() => {\r\n      bScroll && bScroll.refresh();\r\n    });\r\n    return (\r\n      <div className={styles[\"scroll-wrapper\"]} ref={scrollRef}>\r\n        {children}\r\n      </div>\r\n    );\r\n  }\r\n);\r\n\r\nexport default memo(Scroll);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"scroll-wrapper\":\"Scroll_scroll-wrapper__3fgDG\"};","import { Icon } from \"collin-ui\";\r\nimport styles from \"./index.module.scss\";\r\nimport React, { FC, memo } from \"react\";\r\n\r\nconst Loading: FC = () => {\r\n  return (\r\n    <div className={styles[\"loading-wrap\"]}>\r\n      <Icon icon=\"spinner\" className={styles[\"loading\"]}></Icon>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default memo(Loading);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loading-wrap\":\"Loading_loading-wrap__3PMkp\",\"loading\":\"Loading_loading__30w8P\",\"myScale\":\"Loading_myScale__3XULs\"};"],"sourceRoot":""}
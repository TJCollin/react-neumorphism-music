{"version":3,"sources":["pages/Singers/index.module.scss","pages/Singers/Tabs/index.module.scss","pages/Singers/List/index.module.scss","apis/data.ts","pages/Singers/Tabs/index.tsx","pages/Singers/List/index.tsx","pages/Singers/index.tsx","assets/images/music.png","components/Scroll/index.tsx","components/Scroll/index.module.scss"],"names":["module","exports","alphaTypes","key","name","Tabs","tabsData","curType","onItemClick","handleClick","e","itemValue","target","dataset","value","console","log","Scroll","direction","className","styles","map","item","classes","data-value","onClick","size","memo","SingerList","listData","singer","to","id","debounce","placeholder","src","require","default","alt","width","height","picUrl","Singers","route","useSelector","state","singerList","singers","curInx","player","currentIndex","dispatch","useDispatch","useEffect","getSingerListAction","useState","setCurType","scrollRef","useRef","useCallback","type","current","refresh","wrapperStyle","flex","overflow","marginBottom","style","ref","onScroll","forceCheck","renderRoutes","routes","forwardRef","click","children","bounceTop","bounceBottom","bounceLeft","bounceRight","pullDownLoading","pullUpLoading","restProps","onPullDown","onPullUp","bScroll","setBScroll","scroll","BScroll","probeType","scrollX","scrollY","tap","bounce","top","bottom","left","right","useImperativeHandle","scrollTo","getBScroll","on","off"],"mappings":"8HACAA,EAAOC,QAAU,CAAC,eAAe,8BAA8B,YAAY,6B,oBCA3ED,EAAOC,QAAU,CAAC,WAAW,uBAAuB,YAAY,0B,oBCAhED,EAAOC,QAAU,CAAC,eAAe,2BAA2B,KAAO,mBAAmB,QAAU,sBAAsB,IAAM,kBAAkB,cAAc,4B,mECEtJC,EAA2B,CAC/B,CACEC,IAAK,GACLC,KAAM,OAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,M,qFCjGJC,EAAsB,SAAC,GAAwC,IAAtCC,EAAqC,EAArCA,SAAUC,EAA2B,EAA3BA,QAASC,EAAkB,EAAlBA,YAC1CC,EAAc,SAACC,GACnB,IACEC,EADaD,EAAEE,OACIC,QAAQC,MAC7BC,QAAQC,IAAIL,GACZA,GAAaH,EAAYG,IAE3B,OACE,cAACM,EAAA,EAAD,CAAQC,UAAU,aAAlB,SACE,oBAAIC,UAAWC,IAAO,YAAtB,SACGd,GACCA,EAASe,KAAI,SAACC,GAEZ,OADAA,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","file":"static/js/10.710af4a0.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"singers-wrap\":\"Singers_singers-wrap__3v5Uh\",\"tabs-wrap\":\"Singers_tabs-wrap__3rU0R\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tab-list\":\"Tabs_tab-list__1t5j3\",\"list-item\":\"Tabs_list-item__2y5DD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"singers-list\":\"List_singers-list__3V4c1\",\"card\":\"List_card__3meOD\",\"content\":\"List_content__t82hg\",\"img\":\"List_img__35A74\",\"singer-name\":\"List_singer-name__2qUPa\"};","import { Alpha } from \"../typings/localData\";\n\n// 歌手首字母\nconst alphaTypes: Array<Alpha> = [\n  {\n    key: \"\",\n    name: \"All\",\n  },\n  {\n    key: \"A\",\n    name: \"A\",\n  },\n  {\n    key: \"B\",\n    name: \"B\",\n  },\n  {\n    key: \"C\",\n    name: \"C\",\n  },\n  {\n    key: \"D\",\n    name: \"D\",\n  },\n  {\n    key: \"E\",\n    name: \"E\",\n  },\n  {\n    key: \"F\",\n    name: \"F\",\n  },\n  {\n    key: \"G\",\n    name: \"G\",\n  },\n  {\n    key: \"H\",\n    name: \"H\",\n  },\n  {\n    key: \"I\",\n    name: \"I\",\n  },\n  {\n    key: \"J\",\n    name: \"J\",\n  },\n  {\n    key: \"K\",\n    name: \"K\",\n  },\n  {\n    key: \"L\",\n    name: \"L\",\n  },\n  {\n    key: \"M\",\n    name: \"M\",\n  },\n  {\n    key: \"N\",\n    name: \"N\",\n  },\n  {\n    key: \"O\",\n    name: \"O\",\n  },\n  {\n    key: \"P\",\n    name: \"P\",\n  },\n  {\n    key: \"Q\",\n    name: \"Q\",\n  },\n  {\n    key: \"R\",\n    name: \"R\",\n  },\n  {\n    key: \"S\",\n    name: \"S\",\n  },\n  {\n    key: \"T\",\n    name: \"T\",\n  },\n  {\n    key: \"U\",\n    name: \"U\",\n  },\n  {\n    key: \"V\",\n    name: \"V\",\n  },\n  {\n    key: \"W\",\n    name: \"W\",\n  },\n  {\n    key: \"X\",\n    name: \"X\",\n  },\n  {\n    key: \"Y\",\n    name: \"Y\",\n  },\n  {\n    key: \"Z\",\n    name: \"Z\",\n  },\n];\n\nexport { alphaTypes };\n","import React, { FC, memo, MouseEvent } from \"react\";\nimport Scroll from \"../../../components/Scroll\";\nimport { Alpha } from \"../../../typings/localData\";\nimport styles from \"./index.module.scss\";\nimport classes from \"classnames\";\nimport { Button } from \"collin-ui\";\n\nexport interface TabsProps {\n  tabsData: Alpha[];\n  curType: string;\n  onItemClick: (type: string) => void;\n}\n\nconst Tabs: FC<TabsProps> = ({ tabsData, curType, onItemClick }) => {\n  const handleClick = (e: MouseEvent) => {\n    const target = e.target as HTMLElement,\n      itemValue = target.dataset.value;\n    console.log(itemValue);\n    itemValue && onItemClick(itemValue);\n  };\n  return (\n    <Scroll direction=\"horizontal\">\n      <ul className={styles[\"tab-list\"]}>\n        {tabsData &&\n          tabsData.map((item) => {\n            item.key = item.key || \"all\";\n            return (\n              <li\n                className={classes(styles[\"list-item\"])}\n                key={item.key}\n                data-value={item.key}\n                onClick={handleClick}\n              >\n                {curType !== item.key && item.name}\n                {curType === item.key && <Button size=\"sm\">{item.name}</Button>}\n              </li>\n            );\n          })}\n      </ul>\n    </Scroll>\n  );\n};\n\nexport default memo(Tabs);\n","import { Card, CardContent } from \"collin-ui\";\nimport React, { FC, memo } from \"react\";\nimport Scroll from \"../../../components/Scroll\";\nimport { Singer } from \"../../../typings\";\nimport styles from \"./index.module.scss\";\nimport LazyLoad from \"react-lazyload\";\nimport { Link } from \"react-router-dom\";\nexport interface SingerListProps {\n  listData: Singer[];\n}\n\nconst SingerList: FC<SingerListProps> = ({ listData }) => {\n  return (\n    <div className={styles[\"singers-list\"]}>\n      {listData.map((singer) => {\n        return (\n          <Link to={`singers/${singer.id}`} key={singer.id}>\n            <Card className={styles[\"card\"]}>\n              <CardContent className={styles[\"content\"]}>\n                <div className={styles[\"img\"]}>\n                  <LazyLoad\n                    debounce={500}\n                    placeholder={\n                      <img\n                        src={\n                          require(\"../../../assets/images/music.png\").default\n                        }\n                        alt=\"music\"\n                        width=\"50\"\n                        height=\"100%\"\n                        className={styles[\"img\"]}\n                      />\n                    }\n                  >\n                    <img\n                      src={singer.picUrl}\n                      alt=\"\"\n                      className={styles[\"img\"]}\n                      width=\"100%\"\n                      height=\"100%\"\n                    />\n                  </LazyLoad>\n                </div>\n                <p className={styles[\"singer-name\"]}>{singer.name}</p>\n              </CardContent>\n            </Card>\n          </Link>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default memo(SingerList);\n","import React, { FC, useCallback, useEffect, useRef, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { alphaTypes } from \"../../apis/data\";\nimport { StoreState } from \"../../store\";\nimport styles from \"./index.module.scss\";\nimport { getSingerListAction } from \"./store/actions\";\nimport Tabs from \"./Tabs\";\nimport SingerList from \"./List\";\nimport Scroll, { ScrollInstance } from \"../../components/Scroll\";\nimport { forceCheck } from \"react-lazyload\";\nimport { renderRoutes, RouteConfigComponentProps } from \"react-router-config\";\n\nconst Singers: FC<RouteConfigComponentProps> = ({ route }) => {\n  const { singerList, curInx } = useSelector((state: StoreState) => ({\n    singerList: state.singers.singerList,\n    curInx: state.player.currentIndex,\n  }));\n  const dispatch = useDispatch();\n\n  /**\n   * 获取歌手数据\n   */\n  useEffect((): void => {\n    dispatch(getSingerListAction());\n  }, []);\n\n  const [curType, setCurType] = useState<string>(\"\");\n  const scrollRef = useRef<ScrollInstance>(null);\n\n  /**\n   * 监听 Tab 项点击\n   */\n  const onItemClick = useCallback((type: string) => {\n    setCurType(type);\n    dispatch(getSingerListAction(type));\n    scrollRef.current?.refresh();\n  }, []);\n\n  const wrapperStyle = {\n    flex: 1,\n    overflow: \"hidden\",\n    marginBottom: curInx > -1 ? \"60px\" : 0,\n  };\n  return (\n    <div className={styles[\"singers-wrap\"]}>\n      <div className={styles[\"tabs-wrap\"]}>\n        <Tabs\n          tabsData={alphaTypes}\n          curType={curType}\n          onItemClick={onItemClick}\n        ></Tabs>\n      </div>\n      <div style={wrapperStyle}>\n        <Scroll ref={scrollRef} onScroll={forceCheck}>\n          <SingerList listData={singerList}></SingerList>\n        </Scroll>\n      </div>\n      {renderRoutes(route?.routes)}\n    </div>\n  );\n};\nexport default Singers;\n","export default __webpack_public_path__ + \"static/media/music.6275a6ce.png\";","import BScroll, { BScrollInstance, Options } from \"better-scroll\";\nimport React, {\n  FC,\n  forwardRef,\n  memo,\n  ReactNode,\n  useEffect,\n  useImperativeHandle,\n  useRef,\n  useState,\n} from \"react\";\nimport styles from \"./index.module.scss\";\n\nexport interface Position {\n  x: number;\n  y: number;\n}\n\nexport interface ScrollProps extends Options {\n  ref?: any;\n  direction?: \"horizontal\" | \"vertical\";\n  click?: boolean;\n  bounceTop?: boolean;\n  bounceBottom?: boolean;\n  bounceLeft?: boolean;\n  bounceRight?: boolean;\n  pullDownLoading?: boolean;\n  pullUpLoading?: boolean;\n  onScroll?: (pos: Position) => void;\n  onPullDown?: () => void;\n  onPullUp?: () => void;\n  children?: ReactNode;\n}\n\nexport interface ScrollInstance {\n  refresh: () => void;\n  getBScroll: () => BScrollInstance | undefined;\n}\n\nconst Scroll: FC<ScrollProps> = forwardRef(\n  (\n    {\n      direction = \"vertical\",\n      click = true,\n      children,\n      bounceTop = true,\n      bounceBottom = true,\n      bounceLeft = true,\n      bounceRight = true,\n      pullDownLoading = false,\n      pullUpLoading = false,\n      onScroll,\n      onPullDown = () => {},\n      onPullUp = () => {},\n      ...restProps\n    },\n    ref\n  ) => {\n    const [bScroll, setBScroll] = useState<BScrollInstance | null>(null);\n    const scrollRef = useRef<HTMLDivElement>(null);\n    /**\n     * 初始化scroll\n     */\n    useEffect(() => {\n      let scroll = new BScroll(scrollRef.current!, {\n        click: click,\n        probeType: 3,\n        scrollX: direction === \"horizontal\",\n        scrollY: direction === \"vertical\",\n        tap: \"tap\",\n        bounce: {\n          top: bounceTop,\n          bottom: bounceBottom,\n          left: bounceLeft,\n          right: bounceRight,\n        },\n        ...restProps,\n      });\n\n      setBScroll(scroll);\n      return () => {\n        setBScroll(null);\n      };\n    }, []);\n\n    /**\n     * 通过 ref 暴露组件方法\n     */\n    useImperativeHandle(ref, (): ScrollInstance => {\n      return {\n        refresh() {\n          if (bScroll) {\n            bScroll.refresh();\n            bScroll.scrollTo(0, 0);\n          }\n        },\n        getBScroll() {\n          if (bScroll) {\n            return bScroll;\n          }\n        },\n      };\n    });\n\n    /**\n     * 监听onScroll\n     */\n    useEffect(() => {\n      if (onScroll && bScroll) {\n        bScroll.on(\"scroll\", onScroll);\n        return () => {\n          bScroll.off(\"scroll\");\n        };\n      }\n    }, [bScroll, onScroll]);\n\n    /**\n     * 刷新scroll\n     */\n    useEffect(() => {\n      bScroll && bScroll.refresh();\n    });\n    return (\n      <div className={styles[\"scroll-wrapper\"]} ref={scrollRef}>\n        {children}\n      </div>\n    );\n  }\n);\n\nexport default memo(Scroll);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"scroll-wrapper\":\"Scroll_scroll-wrapper__3QrgQ\"};"],"sourceRoot":""}
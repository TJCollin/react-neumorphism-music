{"version":3,"sources":["pages/Rank/index.module.scss","pages/Rank/List/index.module.scss","pages/Rank/List/index.tsx","pages/Rank/index.tsx","assets/images/music.png","components/Scroll/index.tsx","components/Scroll/index.module.scss","components/Loading/index.tsx","components/Loading/index.module.scss"],"names":["module","exports","RankList","listData","Scroll","className","styles","map","rankItem","to","id","debounce","placeholder","src","require","default","alt","width","height","coverImgUrl","tracks","cur","index","first","second","memo","Rank","route","useSelector","state","curInx","player","currentIndex","globalList","rank","officialList","loading","dispatch","useDispatch","useEffect","length","getRankListAction","wrapperStyle","flex","overflow","marginBottom","style","renderRoutes","routes","Loading","forwardRef","ref","direction","click","children","bounceTop","bounceBottom","bounceLeft","bounceRight","onScroll","pullDownLoading","pullUpLoading","restProps","onPullDown","onPullUp","useState","bScroll","setBScroll","scrollRef","useRef","scroll","BScroll","current","probeType","scrollX","scrollY","tap","bounce","top","bottom","left","right","useImperativeHandle","refresh","scrollTo","getBScroll","on","off","icon"],"mappings":"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","file":"static/js/9.135eb406.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"rank-wrap\":\"Rank_rank-wrap__3RNSu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"rankItem-list\":\"List_rankItem-list__3JMIs\",\"card\":\"List_card__2r6Mu\",\"content\":\"List_content__4fxB8\",\"img\":\"List_img__3GPVu\",\"song-list\":\"List_song-list__31aYs\",\"song-item\":\"List_song-item__33CmQ\"};","import { Card, CardContent } from \"collin-ui\";\nimport React, { FC, memo } from \"react\";\nimport Scroll from \"../../../components/Scroll\";\nimport styles from \"./index.module.scss\";\nimport LazyLoad from \"react-lazyload\";\nimport { RankItem, RankTrack } from \"../typing\";\nimport { Link } from \"react-router-dom\";\nexport interface RankListProps {\n  listData: RankItem[];\n}\n\nconst RankList: FC<RankListProps> = ({ listData }) => {\n  return (\n    <Scroll>\n      <div className={styles[\"rankItem-list\"]}>\n        {listData.map((rankItem) => {\n          return (\n            <Link to={`/rank/${rankItem.id}`}>\n              <Card className={styles[\"card\"]} key={rankItem.id}>\n                <CardContent className={styles[\"content\"]}>\n                  <div className={styles[\"img\"]}>\n                    <LazyLoad\n                      debounce={500}\n                      placeholder={\n                        <img\n                          src={\n                            require(\"../../../assets/images/music.png\").default\n                          }\n                          alt=\"music\"\n                          width=\"50\"\n                          height=\"100%\"\n                          className={styles[\"img\"]}\n                        />\n                      }\n                    >\n                      <img\n                        src={rankItem.coverImgUrl}\n                        alt=\"\"\n                        className={styles[\"img\"]}\n                        width=\"100%\"\n                        height=\"100%\"\n                      />\n                    </LazyLoad>\n                  </div>\n                  <ul className={styles[\"song-list\"]}>\n                    {rankItem.tracks &&\n                      rankItem.tracks.map((cur: RankTrack, index: number) => (\n                        <li className={styles[\"song-item\"]} key={index}>\n                          <span>{index + 1}.</span>\n                          <span>{cur.first}</span>\n                          <span> - </span>\n                          <span>{cur.second}</span>\n                        </li>\n                      ))}\n                  </ul>\n                </CardContent>\n              </Card>\n            </Link>\n          );\n        })}\n      </div>\n    </Scroll>\n  );\n};\n\nexport default memo(RankList);\n","import React, { useEffect, FC } from \"react\";\nimport styles from \"./index.module.scss\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { StoreState } from \"../../store\";\nimport RankList from \"./List\";\nimport { getRankListAction } from \"./store/actions\";\nimport Loading from \"../../components/Loading\";\nimport { renderRoutes, RouteConfigComponentProps } from \"react-router-config\";\nconst Rank: FC<RouteConfigComponentProps> = ({ route }) => {\n  const { globalList, curInx, officialList, loading } = useSelector(\n    (state: StoreState) => ({\n      curInx: state.player.currentIndex,\n      globalList: state.rank.globalList,\n      officialList: state.rank.officialList,\n      loading: state.rank.loading,\n    })\n  );\n  const dispatch = useDispatch();\n  useEffect((): void => {\n    if (!globalList.length || !officialList.length) {\n      dispatch(getRankListAction());\n    }\n  }, []);\n  const wrapperStyle = {\n    flex: 1,\n    overflow: \"hidden\",\n    marginBottom: curInx > -1 ? \"60px\" : 0,\n  };\n  return (\n    <div className={styles[\"rank-wrap\"]} style={wrapperStyle}>\n      <RankList listData={officialList}></RankList>\n      {renderRoutes(route?.routes)}\n      {loading && <Loading></Loading>}\n    </div>\n  );\n};\nexport default Rank;\n","export default __webpack_public_path__ + \"static/media/music.6275a6ce.png\";","import BScroll, { BScrollInstance, Options } from \"better-scroll\";\nimport React, {\n  FC,\n  forwardRef,\n  memo,\n  ReactNode,\n  useEffect,\n  useImperativeHandle,\n  useRef,\n  useState,\n} from \"react\";\nimport styles from \"./index.module.scss\";\n\nexport interface Position {\n  x: number;\n  y: number;\n}\n\nexport interface ScrollProps extends Options {\n  ref?: any;\n  direction?: \"horizontal\" | \"vertical\";\n  click?: boolean;\n  bounceTop?: boolean;\n  bounceBottom?: boolean;\n  bounceLeft?: boolean;\n  bounceRight?: boolean;\n  pullDownLoading?: boolean;\n  pullUpLoading?: boolean;\n  onScroll?: (pos: Position) => void;\n  onPullDown?: () => void;\n  onPullUp?: () => void;\n  children?: ReactNode;\n}\n\nexport interface ScrollInstance {\n  refresh: () => void;\n  getBScroll: () => BScrollInstance | undefined;\n}\n\nconst Scroll: FC<ScrollProps> = forwardRef(\n  (\n    {\n      direction = \"vertical\",\n      click = true,\n      children,\n      bounceTop = true,\n      bounceBottom = true,\n      bounceLeft = true,\n      bounceRight = true,\n      pullDownLoading = false,\n      pullUpLoading = false,\n      onScroll,\n      onPullDown = () => {},\n      onPullUp = () => {},\n      ...restProps\n    },\n    ref\n  ) => {\n    const [bScroll, setBScroll] = useState<BScrollInstance | null>(null);\n    const scrollRef = useRef<HTMLDivElement>(null);\n    /**\n     * 初始化scroll\n     */\n    useEffect(() => {\n      let scroll = new BScroll(scrollRef.current!, {\n        click: click,\n        probeType: 3,\n        scrollX: direction === \"horizontal\",\n        scrollY: direction === \"vertical\",\n        tap: \"tap\",\n        bounce: {\n          top: bounceTop,\n          bottom: bounceBottom,\n          left: bounceLeft,\n          right: bounceRight,\n        },\n        ...restProps,\n      });\n\n      setBScroll(scroll);\n      return () => {\n        setBScroll(null);\n      };\n    }, []);\n\n    /**\n     * 通过 ref 暴露组件方法\n     */\n    useImperativeHandle(ref, (): ScrollInstance => {\n      return {\n        refresh() {\n          if (bScroll) {\n            bScroll.refresh();\n            bScroll.scrollTo(0, 0);\n          }\n        },\n        getBScroll() {\n          if (bScroll) {\n            return bScroll;\n          }\n        },\n      };\n    });\n\n    /**\n     * 监听onScroll\n     */\n    useEffect(() => {\n      if (onScroll && bScroll) {\n        bScroll.on(\"scroll\", onScroll);\n        return () => {\n          bScroll.off(\"scroll\");\n        };\n      }\n    }, [bScroll, onScroll]);\n\n    /**\n     * 刷新scroll\n     */\n    useEffect(() => {\n      bScroll && bScroll.refresh();\n    });\n    return (\n      <div className={styles[\"scroll-wrapper\"]} ref={scrollRef}>\n        {children}\n      </div>\n    );\n  }\n);\n\nexport default memo(Scroll);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"scroll-wrapper\":\"Scroll_scroll-wrapper__3QrgQ\"};","import { Icon } from \"collin-ui\";\nimport styles from \"./index.module.scss\";\nimport React, { FC, memo } from \"react\";\n\nconst Loading: FC = () => {\n  return (\n    <div className={styles[\"loading-wrap\"]}>\n      <Icon icon=\"spinner\" className={styles[\"loading\"]}></Icon>\n    </div>\n  );\n};\n\nexport default memo(Loading);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loading-wrap\":\"Loading_loading-wrap__2zic1\",\"loading\":\"Loading_loading__38WPi\",\"myScale\":\"Loading_myScale__2HXha\"};"],"sourceRoot":""}
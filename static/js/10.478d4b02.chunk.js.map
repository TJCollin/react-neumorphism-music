{"version":3,"sources":["pages/Singers/index.module.scss","pages/Singers/Tabs/index.module.scss","pages/Singers/List/index.module.scss","apis/data.ts","pages/Singers/Tabs/index.tsx","pages/Singers/List/index.tsx","pages/Singers/index.tsx","assets/images/music.png","components/Scroll/index.tsx","components/Scroll/index.module.scss"],"names":["module","exports","alphaTypes","key","name","Tabs","tabsData","curType","onItemClick","handleClick","e","itemValue","target","dataset","value","Scroll","direction","className","styles","map","item","classes","data-value","onClick","memo","SingerList","listData","singer","to","id","debounce","placeholder","src","require","default","alt","width","height","picUrl","Singers","route","useSelector","state","singerList","singers","curInx","player","currentIndex","dispatch","useDispatch","useEffect","getSingerListAction","useState","setCurType","scrollRef","useRef","useCallback","type","current","refresh","wrapperStyle","flex","overflow","marginBottom","style","ref","onScroll","forceCheck","renderRoutes","routes","forwardRef","click","children","bounceTop","bounceBottom","bounceLeft","bounceRight","pullDownLoading","pullUpLoading","restProps","onPullDown","onPullUp","bScroll","setBScroll","scroll","BScroll","probeType","scrollX","scrollY","tap","bounce","top","bottom","left","right","useImperativeHandle","scrollTo","getBScroll","on","off"],"mappings":"8HACAA,EAAOC,QAAU,CAAC,eAAe,8BAA8B,YAAY,6B,oBCA3ED,EAAOC,QAAU,CAAC,WAAW,uBAAuB,YAAY,wBAAwB,QAAU,wB,oBCAlGD,EAAOC,QAAU,CAAC,eAAe,2BAA2B,KAAO,mBAAmB,QAAU,sBAAsB,IAAM,kBAAkB,cAAc,4B,mECEtJC,EAA2B,CAC/B,CACEC,IAAK,GACLC,KAAM,OAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,KAER,CACED,IAAK,IACLC,KAAM,M,6EClGJC,EAAsB,SAAC,GAAwC,IAAtCC,EAAqC,EAArCA,SAAUC,EAA2B,EAA3BA,QAASC,EAAkB,EAAlBA,YAC1CC,EAAc,SAACC,GACnB,IACEC,EADaD,EAAEE,OACIC,QAAQC,MAC7BH,GAAaH,EAAYG,IAE3B,OACE,cAACI,EAAA,EAAD,CAAQC,UAAU,aAAlB,SACE,oBAAIC,UAAWC,IAAO,YAAtB,SACGZ,GACCA,EAASa,KAAI,SAACC,GAAD,OACX,oBACEH,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","file":"static/js/10.478d4b02.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"singers-wrap\":\"Singers_singers-wrap__3hhqf\",\"tabs-wrap\":\"Singers_tabs-wrap__109uG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tab-list\":\"Tabs_tab-list__2CjE-\",\"list-item\":\"Tabs_list-item__11BHZ\",\"actived\":\"Tabs_actived__leMou\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"singers-list\":\"List_singers-list__1v4ps\",\"card\":\"List_card__1MlME\",\"content\":\"List_content__1A6ZL\",\"img\":\"List_img__4eB6_\",\"singer-name\":\"List_singer-name__sr1mn\"};","import { Alpha } from \"../typings/localData\";\r\n\r\n// 歌手首字母\r\nconst alphaTypes: Array<Alpha> = [\r\n  {\r\n    key: \"\",\r\n    name: \"All\",\r\n  },\r\n  {\r\n    key: \"A\",\r\n    name: \"A\",\r\n  },\r\n  {\r\n    key: \"B\",\r\n    name: \"B\",\r\n  },\r\n  {\r\n    key: \"C\",\r\n    name: \"C\",\r\n  },\r\n  {\r\n    key: \"D\",\r\n    name: \"D\",\r\n  },\r\n  {\r\n    key: \"E\",\r\n    name: \"E\",\r\n  },\r\n  {\r\n    key: \"F\",\r\n    name: \"F\",\r\n  },\r\n  {\r\n    key: \"G\",\r\n    name: \"G\",\r\n  },\r\n  {\r\n    key: \"H\",\r\n    name: \"H\",\r\n  },\r\n  {\r\n    key: \"I\",\r\n    name: \"I\",\r\n  },\r\n  {\r\n    key: \"J\",\r\n    name: \"J\",\r\n  },\r\n  {\r\n    key: \"K\",\r\n    name: \"K\",\r\n  },\r\n  {\r\n    key: \"L\",\r\n    name: \"L\",\r\n  },\r\n  {\r\n    key: \"M\",\r\n    name: \"M\",\r\n  },\r\n  {\r\n    key: \"N\",\r\n    name: \"N\",\r\n  },\r\n  {\r\n    key: \"O\",\r\n    name: \"O\",\r\n  },\r\n  {\r\n    key: \"P\",\r\n    name: \"P\",\r\n  },\r\n  {\r\n    key: \"Q\",\r\n    name: \"Q\",\r\n  },\r\n  {\r\n    key: \"R\",\r\n    name: \"R\",\r\n  },\r\n  {\r\n    key: \"S\",\r\n    name: \"S\",\r\n  },\r\n  {\r\n    key: \"T\",\r\n    name: \"T\",\r\n  },\r\n  {\r\n    key: \"U\",\r\n    name: \"U\",\r\n  },\r\n  {\r\n    key: \"V\",\r\n    name: \"V\",\r\n  },\r\n  {\r\n    key: \"W\",\r\n    name: \"W\",\r\n  },\r\n  {\r\n    key: \"X\",\r\n    name: \"X\",\r\n  },\r\n  {\r\n    key: \"Y\",\r\n    name: \"Y\",\r\n  },\r\n  {\r\n    key: \"Z\",\r\n    name: \"Z\",\r\n  },\r\n];\r\n\r\nexport { alphaTypes };\r\n","import React, { FC, memo, MouseEvent } from \"react\";\r\nimport Scroll from \"../../../components/Scroll\";\r\nimport { Alpha } from \"../../../typings/localData\";\r\nimport styles from \"./index.module.scss\";\r\nimport classes from \"classnames\";\r\n\r\nexport interface TabsProps {\r\n  tabsData: Alpha[];\r\n  curType: string;\r\n  onItemClick: (type: string) => void;\r\n}\r\n\r\nconst Tabs: FC<TabsProps> = ({ tabsData, curType, onItemClick }) => {\r\n  const handleClick = (e: MouseEvent) => {\r\n    const target = e.target as HTMLElement,\r\n      itemValue = target.dataset.value;\r\n    itemValue && onItemClick(itemValue);\r\n  };\r\n  return (\r\n    <Scroll direction=\"horizontal\">\r\n      <ul className={styles[\"tab-list\"]}>\r\n        {tabsData &&\r\n          tabsData.map((item) => (\r\n            <li\r\n              className={classes(\r\n                styles[\"list-item\"],\r\n                curType === item.key && styles[\"actived\"]\r\n              )}\r\n              key={item.key}\r\n              data-value={item.key}\r\n              onClick={handleClick}\r\n            >\r\n              {item.name}\r\n            </li>\r\n          ))}\r\n      </ul>\r\n    </Scroll>\r\n  );\r\n};\r\n\r\nexport default memo(Tabs);\r\n","import { Card, CardContent } from \"collin-ui\";\r\nimport React, { FC, memo } from \"react\";\r\nimport Scroll from \"../../../components/Scroll\";\r\nimport { Singer } from \"../../../typings\";\r\nimport styles from \"./index.module.scss\";\r\nimport LazyLoad from \"react-lazyload\";\r\nimport { Link } from \"react-router-dom\";\r\nexport interface SingerListProps {\r\n  listData: Singer[];\r\n}\r\n\r\nconst SingerList: FC<SingerListProps> = ({ listData }) => {\r\n  return (\r\n    <div className={styles[\"singers-list\"]}>\r\n      {listData.map((singer) => {\r\n        return (\r\n          <Link to={`singers/${singer.id}`} key={singer.id}>\r\n            <Card className={styles[\"card\"]}>\r\n              <CardContent className={styles[\"content\"]}>\r\n                <div className={styles[\"img\"]}>\r\n                  <LazyLoad\r\n                    debounce={500}\r\n                    placeholder={\r\n                      <img\r\n                        src={\r\n                          require(\"../../../assets/images/music.png\").default\r\n                        }\r\n                        alt=\"music\"\r\n                        width=\"50\"\r\n                        height=\"100%\"\r\n                        className={styles[\"img\"]}\r\n                      />\r\n                    }\r\n                  >\r\n                    <img\r\n                      src={singer.picUrl}\r\n                      alt=\"\"\r\n                      className={styles[\"img\"]}\r\n                      width=\"100%\"\r\n                      height=\"100%\"\r\n                    />\r\n                  </LazyLoad>\r\n                </div>\r\n                <p className={styles[\"singer-name\"]}>{singer.name}</p>\r\n              </CardContent>\r\n            </Card>\r\n          </Link>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default memo(SingerList);\r\n","import React, { FC, useCallback, useEffect, useRef, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { alphaTypes } from \"../../apis/data\";\r\nimport { StoreState } from \"../../store\";\r\nimport styles from \"./index.module.scss\";\r\nimport { getSingerListAction } from \"./store/actions\";\r\nimport Tabs from \"./Tabs\";\r\nimport SingerList from \"./List\";\r\nimport Scroll, { ScrollInstance } from \"../../components/Scroll\";\r\nimport { forceCheck } from \"react-lazyload\";\r\nimport { renderRoutes, RouteConfigComponentProps } from \"react-router-config\";\r\n\r\nconst Singers: FC<RouteConfigComponentProps> = ({ route }) => {\r\n  const { singerList, curInx } = useSelector((state: StoreState) => ({\r\n    singerList: state.singers.singerList,\r\n    curInx: state.player.currentIndex,\r\n  }));\r\n  const dispatch = useDispatch();\r\n\r\n  /**\r\n   * 获取歌手数据\r\n   */\r\n  useEffect((): void => {\r\n    dispatch(getSingerListAction());\r\n  }, []);\r\n\r\n  const [curType, setCurType] = useState<string>(\"\");\r\n  const scrollRef = useRef<ScrollInstance>(null);\r\n\r\n  /**\r\n   * 监听 Tab 项点击\r\n   */\r\n  const onItemClick = useCallback((type: string) => {\r\n    setCurType(type);\r\n    dispatch(getSingerListAction(type));\r\n    scrollRef.current?.refresh();\r\n  }, []);\r\n\r\n  const wrapperStyle = {\r\n    flex: 1,\r\n    overflow: \"hidden\",\r\n    marginBottom: curInx > -1 ? \"60px\" : 0,\r\n  };\r\n  return (\r\n    <div className={styles[\"singers-wrap\"]}>\r\n      <div className={styles[\"tabs-wrap\"]}>\r\n        <Tabs\r\n          tabsData={alphaTypes}\r\n          curType={curType}\r\n          onItemClick={onItemClick}\r\n        ></Tabs>\r\n      </div>\r\n      <div style={wrapperStyle}>\r\n        <Scroll ref={scrollRef} onScroll={forceCheck}>\r\n          <SingerList listData={singerList}></SingerList>\r\n        </Scroll>\r\n      </div>\r\n      {renderRoutes(route?.routes)}\r\n    </div>\r\n  );\r\n};\r\nexport default Singers;\r\n","export default __webpack_public_path__ + \"static/media/music.6275a6ce.png\";","import BScroll, { BScrollInstance, Options } from \"better-scroll\";\r\nimport React, {\r\n  FC,\r\n  forwardRef,\r\n  memo,\r\n  ReactNode,\r\n  useEffect,\r\n  useImperativeHandle,\r\n  useRef,\r\n  useState,\r\n} from \"react\";\r\nimport styles from \"./index.module.scss\";\r\n\r\nexport interface Position {\r\n  x: number;\r\n  y: number;\r\n}\r\n\r\nexport interface ScrollProps extends Options {\r\n  ref?: any;\r\n  direction?: \"horizontal\" | \"vertical\";\r\n  click?: boolean;\r\n  bounceTop?: boolean;\r\n  bounceBottom?: boolean;\r\n  bounceLeft?: boolean;\r\n  bounceRight?: boolean;\r\n  pullDownLoading?: boolean;\r\n  pullUpLoading?: boolean;\r\n  onScroll?: (pos: Position) => void;\r\n  onPullDown?: () => void;\r\n  onPullUp?: () => void;\r\n  children?: ReactNode;\r\n}\r\n\r\nexport interface ScrollInstance {\r\n  refresh: () => void;\r\n  getBScroll: () => BScrollInstance | undefined;\r\n}\r\n\r\nconst Scroll: FC<ScrollProps> = forwardRef(\r\n  (\r\n    {\r\n      direction = \"vertical\",\r\n      click = true,\r\n      children,\r\n      bounceTop = true,\r\n      bounceBottom = true,\r\n      bounceLeft = true,\r\n      bounceRight = true,\r\n      pullDownLoading = false,\r\n      pullUpLoading = false,\r\n      onScroll,\r\n      onPullDown = () => {},\r\n      onPullUp = () => {},\r\n      ...restProps\r\n    },\r\n    ref\r\n  ) => {\r\n    const [bScroll, setBScroll] = useState<BScrollInstance | null>(null);\r\n    const scrollRef = useRef<HTMLDivElement>(null);\r\n    /**\r\n     * 初始化scroll\r\n     */\r\n    useEffect(() => {\r\n      let scroll = new BScroll(scrollRef.current!, {\r\n        click: click,\r\n        probeType: 3,\r\n        scrollX: direction === \"horizontal\",\r\n        scrollY: direction === \"vertical\",\r\n        tap: \"tap\",\r\n        bounce: {\r\n          top: bounceTop,\r\n          bottom: bounceBottom,\r\n          left: bounceLeft,\r\n          right: bounceRight,\r\n        },\r\n        ...restProps,\r\n      });\r\n\r\n      setBScroll(scroll);\r\n      return () => {\r\n        setBScroll(null);\r\n      };\r\n    }, []);\r\n\r\n    /**\r\n     * 通过 ref 暴露组件方法\r\n     */\r\n    useImperativeHandle(ref, (): ScrollInstance => {\r\n      return {\r\n        refresh() {\r\n          if (bScroll) {\r\n            bScroll.refresh();\r\n            bScroll.scrollTo(0, 0);\r\n          }\r\n        },\r\n        getBScroll() {\r\n          if (bScroll) {\r\n            return bScroll;\r\n          }\r\n        },\r\n      };\r\n    });\r\n\r\n    /**\r\n     * 监听onScroll\r\n     */\r\n    useEffect(() => {\r\n      if (onScroll && bScroll) {\r\n        bScroll.on(\"scroll\", onScroll);\r\n        return () => {\r\n          bScroll.off(\"scroll\");\r\n        };\r\n      }\r\n    }, [bScroll, onScroll]);\r\n\r\n    /**\r\n     * 刷新scroll\r\n     */\r\n    useEffect(() => {\r\n      bScroll && bScroll.refresh();\r\n    });\r\n    return (\r\n      <div className={styles[\"scroll-wrapper\"]} ref={scrollRef}>\r\n        {children}\r\n      </div>\r\n    );\r\n  }\r\n);\r\n\r\nexport default memo(Scroll);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"scroll-wrapper\":\"Scroll_scroll-wrapper__3fgDG\"};"],"sourceRoot":""}
(this["webpackJsonpreact-neumorphism-music"]=this["webpackJsonpreact-neumorphism-music"]||[]).push([[5],{111:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n(37),s=n(91),i=n.n(s),r=n(77),o=n(36),l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\u6682\u672a\u5f00\u53d1";return{type:o.a,payload:e,show:t}},u=n(24),j=n(9),b=function(){var t=Object(u.b)(),e=function(){t(l(!0,"\u529f\u80fd\u6682\u672a\u5f00\u53d1\u54df"))};return Object(j.jsxs)("header",{className:i.a.header,children:[Object(j.jsx)(r.b,{className:i.a.menu,onClick:e,children:Object(j.jsx)(r.e,{icon:"list"})}),Object(j.jsx)(r.b,{className:i.a.search,onClick:e,children:Object(j.jsx)(r.e,{icon:"search"})})]})},d=Object(c.memo)(b),O=n(21),m=n(94),f=n.n(m),p=function(t){return Object(j.jsxs)("div",{className:f.a["nav-tabs"],children:[Object(j.jsx)(O.b,{to:"/recommend",activeClassName:f.a.actived,children:Object(j.jsx)("span",{children:"\u63a8\u8350"})}),Object(j.jsx)(O.b,{to:"/singers",activeClassName:f.a.actived,children:Object(j.jsx)("span",{children:"\u6b4c\u624b"})}),Object(j.jsx)(O.b,{to:"/rank",activeClassName:f.a.actived,children:Object(j.jsx)("span",{children:"\u6392\u884c\u699c"})})]})},x=Object(c.memo)(p),h=n(80),_=n(78),v=n(112),g=n(25),y=n(95),N=n.n(y),w=n(76),S=n.n(w),k=function(t){var e=t.song,n=t.playStatus,c=Object(u.b)();return Object(j.jsx)(v.a,{in:void 0!==e,timeout:400,classNames:"mini",unmountOnExit:!0,children:Object(j.jsxs)("div",{className:N.a["mini-player"],children:[Object(j.jsx)("div",{className:S()(N.a["img-wrap"],!n&&N.a.pause),children:Object(j.jsx)("img",{src:(null===e||void 0===e?void 0:e.album.picUrl)+"?param=100y100",width:"40",height:"40",alt:""})}),Object(j.jsxs)("div",{className:N.a.text,children:[Object(j.jsx)("p",{className:N.a.name,children:null===e||void 0===e?void 0:e.name}),Object(j.jsx)("p",{className:N.a.singer,children:null===e||void 0===e?void 0:e.singers.map((function(t){return t.name})).join(" / ")})]}),Object(j.jsxs)("div",{className:N.a.control,children:[Object(j.jsx)(r.b,{className:N.a["control-button"],onClick:function(){console.log("play",!n),c(Object(g.changePlayStatusAction)(!n))},children:Object(j.jsx)(r.e,{icon:n?"pause":"play"})}),Object(j.jsx)(r.b,{className:N.a["control-list"],onClick:function(){c(Object(g.changeShowSongListAction)(!0))},children:Object(j.jsx)(r.e,{icon:"list-ul"})})]})]})})},L=Object(c.memo)(k),T=n(106),C=n(96),P=n.n(C),E=n(79),M=function(t){var e=t.songList,n=t.index,a=Object(c.useState)(!0),s=Object(h.a)(a,2),i=s[0],o=s[1],l=Object(c.useCallback)((function(t){o(0===t.y)}),[]),b=Object(c.useState)({startY:0,distance:0,initialed:!1}),d=Object(h.a)(b,2),O=d[0],m=d[1],f=Object(c.useRef)(null),p=Object(c.useState)(!0),x=Object(h.a)(p,2),y=x[0],N=x[1],w=Object(u.b)(),k=Object(c.useCallback)((function(){f.current.style.transform="translate3d(0, 100%, 0)"}),[]),L=Object(c.useCallback)((function(){f.current.style.transition="all 0.3s",f.current.style.transform="translate3d(0, 0, 0)"}),[]),C=Object(c.useCallback)((function(){f.current.style.transform="translate3d(0, ".concat(O.distance,"px, 0)")}),[O.distance]),M=Object(c.useCallback)((function(){f.current.style.transition="all 0.3s",f.current.style.transform="translate3d(0px, 100%, 0px)"}),[]),R=Object(c.useCallback)((function(){f.current.style.transform="translate3d(0px, 100%, 0px)",w(Object(g.changeShowSongListAction)(!1))}),[]);return Object(j.jsx)(v.a,{timeout:500,in:y,appear:!0,classNames:"move",onEnter:k,onEntering:L,onExit:C,onExiting:M,onExited:R,children:Object(j.jsxs)("div",{className:P.a["song-list"],onClick:function(t){t.stopPropagation()},children:[Object(j.jsx)("div",{className:P.a.mask,onClick:function(){N(!1)}}),Object(j.jsxs)("div",{className:P.a["list-wrap"],ref:f,onTouchStart:function(t){i&&!O.initialed&&(f.current.style.transition="",m({startY:t.nativeEvent.touches[0].pageY,distance:0,initialed:!0}))},onTouchMove:function(t){if(i&&O.initialed){var e=t.nativeEvent.touches[0].pageY-O.startY;e<0||(m(Object(T.a)(Object(T.a)({},O),{},{distance:e})),f.current.style.transform="translate3d(0, ".concat(e,"px, 0)"))}},onTouchEnd:function(t){console.log(i),i&&O.initialed&&(O.distance>150?(f.current.style.transition="all .3s",N(!1)):(m({startY:0,distance:0,initialed:!1}),f.current.style.transition="all .3s",f.current.style.transform="translate3d(0, 0, 0)"))},children:[Object(j.jsx)("div",{className:P.a["list-header"],children:Object(j.jsx)("div",{className:P.a["play-mode"],children:Object(j.jsx)("span",{children:"\u64ad\u653e\u5217\u8868"})})}),Object(j.jsx)("div",{className:P.a["list-scroll-wrap"],children:Object(j.jsx)(E.a,{onScroll:l,children:Object(j.jsx)("ul",{children:e.map((function(t,e){return Object(j.jsxs)("li",{className:S()(P.a["song-item"],n===e&&P.a.active),children:[Object(j.jsxs)("p",{children:[Object(j.jsx)("span",{children:e===n&&Object(j.jsx)(r.e,{icon:"play-circle"})}),"".concat(t.name," - ").concat(Object(_.a)(t.singers)," ")]}),Object(j.jsx)(r.b,{className:P.a.delete,btnType:"primary",onClick:function(t){!function(t,e){o(!1),t.stopPropagation(),w(Object(g.deleteSongAction)(e))}(t,e)},children:Object(j.jsx)(r.e,{icon:"trash"})})]},t.id)}))})})})]})]})})},R=Object(c.memo)(M),Y=function(){var t=Object(u.c)((function(t){return{curIdx:t.player.currentIndex,songList:t.player.songList,status:t.player.playStatus,showSongList:t.player.showSongList}})),e=t.curIdx,n=t.songList,a=t.status,s=t.showSongList,i=Object(u.b)(),r=Object(c.useState)(null),o=Object(h.a)(r,2),l=o[0],b=o[1];Object(c.useEffect)((function(){e<0||n.length<1||(b((function(t){var c=n[e];return(null===t||void 0===t?void 0:t.id)===c.id?t:c})),i(Object(g.changePlayStatusAction)(!0)))}),[n,e]),Object(c.useEffect)((function(){var t=d.current;l&&t&&(t.src=Object(_.b)(l.id))}),[l]),Object(c.useEffect)((function(){var t=d.current;t&&(a?t.play():t.pause())}),[a]);var d=Object(c.useRef)(null);return Object(j.jsxs)("div",{className:"player",children:[Object(j.jsx)(L,{song:n[e],playStatus:a}),Object(j.jsx)("audio",{autoPlay:!0,ref:d}),s&&Object(j.jsx)(R,{index:e,songList:n})]})},I=Object(c.memo)(Y),A=n(97),H=n.n(A),U=function(){var t=Object(u.c)((function(t){return{showToast:t.toast.showToast,toastText:t.toast.toastText}})),e=t.showToast,n=t.toastText,a=void 0===n?"":n,s=Object(u.b)(),i=Object(c.useCallback)((function(){s(l(!1))}),[]),o=Object(c.useRef)(null);return Object(c.useEffect)((function(){if(e)return o.current=setTimeout((function(){i()}),2e3),function(){clearTimeout(Number(o.current)),o.current=null}}),[e,i]),Object(j.jsx)(v.a,{timeout:200,unmountOnExit:!0,classNames:"drop",in:e,children:Object(j.jsx)(r.a,{title:a,className:H.a.toast,onClose:i})})},G=Object(c.memo)(U);e.default=function(t){var e=t.route;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(d,{}),Object(j.jsx)(x,{}),Object(a.a)(null===e||void 0===e?void 0:e.routes),Object(j.jsx)(G,{}),Object(j.jsx)(I,{})]})}},78:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return a}));var c=function(t){return t.map((function(t){return t.name})).join(" / ")},a=function(t){return"https://music.163.com/song/media/outer/url?id=".concat(t,".mp3")}},79:function(t,e,n){"use strict";var c=n(80),a=n(86),s=n(0),i=n(81),r=n.n(i),o=n(9),l=Object(s.forwardRef)((function(t,e){var n=t.direction,i=void 0===n?"vertical":n,l=t.click,u=void 0===l||l,j=t.children,b=t.bounceTop,d=void 0===b||b,O=t.bounceBottom,m=void 0===O||O,f=t.bounceLeft,p=void 0===f||f,x=t.bounceRight,h=void 0===x||x,_=(t.pullDownLoading,t.pullUpLoading,t.onScroll),v=(t.onPullDown,t.onPullUp,Object(s.useState)(null)),g=Object(c.a)(v,2),y=g[0],N=g[1],w=Object(s.useRef)(null);return Object(s.useEffect)((function(){var t=new a.a(w.current,{click:u,probeType:3,scrollX:"horizontal"===i,scrollY:"vertical"===i,tap:"tap",bounce:{top:d,bottom:m,left:p,right:h}});return N(t),function(){N(null)}}),[]),Object(s.useEffect)((function(){if(_&&y)return y.on("scroll",_),function(){y.off("scroll")}}),[y,_]),Object(s.useEffect)((function(){y&&y.refresh()})),Object(o.jsx)("div",{className:r.a["scroll-wrapper"],ref:w,children:j})}));e.a=Object(s.memo)(l)},81:function(t,e,n){t.exports={"scroll-wrapper":"Scroll_scroll-wrapper__3QrgQ"}},91:function(t,e,n){t.exports={header:"Header_header__MbTxY",title:"Header_title__1F92a",menu:"Header_menu__11t9R",search:"Header_search__1IyxK"}},94:function(t,e,n){t.exports={"nav-tabs":"NavTabs_nav-tabs__24HRn",actived:"NavTabs_actived__16j6j"}},95:function(t,e,n){t.exports={"mini-player":"MiniPlayer_mini-player__CeHNs","img-wrap":"MiniPlayer_img-wrap__1-a7b",spin:"MiniPlayer_spin__3wxhx",pause:"MiniPlayer_pause__2kQOf",text:"MiniPlayer_text__mXQuV",name:"MiniPlayer_name__3TpJU",singer:"MiniPlayer_singer__ZlG0P",control:"MiniPlayer_control__ID-sq","control-button":"MiniPlayer_control-button__3sNG-","control-list":"MiniPlayer_control-list__1FU1I"}},96:function(t,e,n){t.exports={"song-list":"SongList_song-list__2ntge",mask:"SongList_mask__3q32e","list-wrap":"SongList_list-wrap__L8_cA","list-header":"SongList_list-header__3ubwt","list-scroll-wrap":"SongList_list-scroll-wrap__3NjPG","song-item":"SongList_song-item__1Iid_",delete:"SongList_delete__wU8z-",active:"SongList_active__2fGVx"}},97:function(t,e,n){t.exports={toast:"Toast_toast__14S2T"}}}]);
//# sourceMappingURL=5.86ea77af.chunk.js.map